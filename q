[1mdiff --git a/app/Exceptions/Handler.php b/app/Exceptions/Handler.php[m
[1mnew file mode 100644[m
[1mindex 0000000..7190ae3[m
[1m--- /dev/null[m
[1m+++ b/app/Exceptions/Handler.php[m
[36m@@ -0,0 +1,99 @@[m
[32m+[m[32m<?php[m
[32m+[m
[32m+[m[32mnamespace App\Exceptions;[m
[32m+[m
[32m+[m[32muse Illuminate\Auth\AuthenticationException;[m
[32m+[m[32muse Illuminate\Database\Eloquent\ModelNotFoundException;[m
[32m+[m[32muse Illuminate\Foundation\Exceptions\Handler as ExceptionHandler;[m
[32m+[m[32muse Illuminate\Session\TokenMismatchException;[m
[32m+[m[32muse Illuminate\Validation\ValidationException;[m
[32m+[m[32muse Symfony\Component\HttpKernel\Exception\HttpExceptionInterface;[m
[32m+[m[32muse Symfony\Component\HttpKernel\Exception\NotFoundHttpException;[m
[32m+[m[32muse Symfony\Component\HttpKernel\Exception\TooManyRequestsHttpException;[m
[32m+[m[32muse Throwable;[m
[32m+[m
[32m+[m[32mclass Handler extends ExceptionHandler[m
[32m+[m[32m{[m
[32m+[m[32m    /**[m
[32m+[m[32m     * The list of the inputs that are never flashed to the session on validation exceptions.[m
[32m+[m[32m     */[m
[32m+[m[32m    protected $dontFlash = [[m
[32m+[m[32m        'current_password',[m
[32m+[m[32m        'password',[m
[32m+[m[32m        'password_confirmation',[m
[32m+[m[32m    ];[m
[32m+[m
[32m+[m[32m    public function register(): void[m
[32m+[m[32m    {[m
[32m+[m[32m        // central place for logging/observability[m
[32m+[m[32m        $this->reportable(function (Throwable $e) {[m
[32m+[m[32m            // Hook your logger/Sentry/etc here if needed.[m
[32m+[m[32m        });[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * Render an exception into an HTTP response.[m
[32m+[m[32m     */[m
[32m+[m[32m    public function render($request, Throwable $e)[m
[32m+[m[32m    {[m
[32m+[m[32m        // 1) CSRF / 419 Page Expired â†’ bounce back with old input (HTML) or 419 JSON (API)[m
[32m+[m[32m        if ($e instanceof TokenMismatchException) {[m
[32m+[m[32m            if ($request->expectsJson()) {[m
[32m+[m[32m                return response()->json(['message' => 'Page expired. Please retry.'], 419);[m
[32m+[m[32m            }[m
[32m+[m[32m            return redirect()->back()[m
[32m+[m[32m                ->withInput() // repopulate non-sensitive fields[m
[32m+[m[32m                ->with('status', 'Your session expired. Please try again.');[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // 2) Validation: keep Laravelâ€™s normal behavior (JSON vs Redirect)[m
[32m+[m[32m        if ($e instanceof ValidationException) {[m
[32m+[m[32m            return $this->convertValidationExceptionToResponse($e, $request);[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // 3) Auth â†’ for HTML redirect to login; for JSON return 401[m
[32m+[m[32m        if ($e instanceof AuthenticationException) {[m
[32m+[m[32m            return $this->unauthenticated($request, $e);[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // 4) 404s: JSON vs HTML[m
[32m+[m[32m        if ($e instanceof ModelNotFoundException || $e instanceof NotFoundHttpException) {[m
[32m+[m[32m            if ($request->expectsJson()) {[m
[32m+[m[32m                return response()->json(['message' => 'Not Found'], 404);[m
[32m+[m[32m            }[m
[32m+[m[32m            // Optionally render a custom 404 view:[m
[32m+[m[32m            // return response()->view('errors.404', [], 404);[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // 5) Throttle â†’ keep JSON clean[m
[32m+[m[32m        if ($e instanceof TooManyRequestsHttpException) {[m
[32m+[m[32m            if ($request->expectsJson()) {[m
[32m+[m[32m                $retryAfter = $e->getHeaders()['Retry-After'] ?? null;[m
[32m+[m[32m                return response()->json([m
[32m+[m[32m                    ['message' => 'Too Many Requests', 'retry_after' => $retryAfter],[m
[32m+[m[32m                    429,[m
[32m+[m[32m                    $retryAfter ? ['Retry-After' => $retryAfter] : [][m
[32m+[m[32m                );[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // 6) For HttpExceptions keep code; for others fallback to parent (shows Whoops in local)[m
[32m+[m[32m        if ($e instanceof HttpExceptionInterface && $request->expectsJson()) {[m
[32m+[m[32m            $status = $e->getStatusCode();[m
[32m+[m[32m            return response()->json(['message' => $e->getMessage() ?: 'Error'], $status, $e->getHeaders());[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        return parent::render($request, $e);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * Customize unauthenticated behavior.[m
[32m+[m[32m     */[m
[32m+[m[32m    protected function unauthenticated($request, AuthenticationException $exception)[m
[32m+[m[32m    {[m
[32m+[m[32m        if ($request->expectsJson()) {[m
[32m+[m[32m            return response()->json(['message' => 'Unauthenticated.'], 401);[m
[32m+[m[32m        }[m
[32m+[m[32m        return redirect()->guest(route('login'));[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[1mdiff --git a/app/Http/Controllers/CCWitelPerformController.php b/app/Http/Controllers/CCWitelPerformController.php[m
[1mnew file mode 100644[m
[1mindex 0000000..47570c6[m
[1m--- /dev/null[m
[1m+++ b/app/Http/Controllers/CCWitelPerformController.php[m
[36m@@ -0,0 +1,178 @@[m
[32m+[m[32m<?php[m
[32m+[m
[32m+[m[32mnamespace App\Http\Controllers;[m
[32m+[m
[32m+[m[32muse Illuminate\Http\Request;[m
[32m+[m[32muse Illuminate\Support\Facades\DB;[m
[32m+[m[32muse Illuminate\Support\Facades\Log;[m
[32m+[m[32muse Illuminate\Support\Facades\Validator;[m
[32m+[m[32muse Carbon\Carbon;[m
[32m+[m
[32m+[m[32mclass CCWitelPerformController extends Controller[m
[32m+[m[32m{[m
[32m+[m[32m    public function index()[m
[32m+[m[32m    {[m
[32m+[m[32m        $months = Carbon::now()->startOfYear()->toPeriod(Carbon::now()->endOfYear(), '1 month');[m
[32m+[m
[32m+[m[32m        Log::info("CCW Controller - Accessing CC W Page");[m
[32m+[m
[32m+[m[32m        return view('cc_witel.cc-witel-performance', [[m
[32m+[m[32m            'months' => $months[m
[32m+[m[32m        ]);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    public function fetchTrendData(Request $request)[m
[32m+[m[32m    {[m
[32m+[m[32m        $validator = Validator::make($request->all(), [[m
[32m+[m[32m            'start_date' => 'required|date_format:Y-m-d',[m
[32m+[m[32m            'end_date' => 'required|date_format:Y-m-d|after_or_equal:start_date',[m
[32m+[m[32m            'source' => 'required|in:reguler,ngtma',[m
[32m+[m[32m        ]);[m
[32m+[m
[32m+[m[32m        if ($validator->fails()) {[m
[32m+[m[32m            return response()->json(['error' => $validator->errors()], 422);[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        try {[m
[32m+[m[32m            $revenueData = DB::table('cc_revenues')[m
[32m+[m[32m                ->select('tahun', 'bulan', 'divisi_id', 'real_revenue', 'target_revenue') // in the future might want to fetch all[m
[32m+[m[32m                ->where('tipe_revenue', strtoupper($request->source))[m
[32m+[m[32m                ->where(DB::raw("CONCAT(tahun, '-', LPAD(bulan, 2, '0'), '-01')"), '>=', $request->start_date)[m
[32m+[m[32m                ->where(DB::raw("CONCAT(tahun, '-', LPAD(bulan, 2, '0'), '-01')"), '<=', $request->end_date)[m
[32m+[m[32m                ->get();[m
[32m+[m
[32m+[m[32m            Log::info("CCW Controller", ['fetched' => $revenueData]);[m
[32m+[m
[32m+[m[32m            return response()->json($revenueData);[m
[32m+[m[32m        } catch (\Exception $e) {[m
[32m+[m[32m            Log::info("CCW Controller", ['error' => $e]);[m
[32m+[m[32m            return response()->json(['error' => 'A server error occurred while fetching data.'], 500);[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    private function applyDateFilters($query, $mode, $year, $month)[m
[32m+[m[32m    {[m
[32m+[m[32m        switch ($mode) {[m
[32m+[m[32m            case 'ytd':[m
[32m+[m[32m                // YTD: From Jan 1 to the end of the current month of the current year[m
[32m+[m[32m                $query->where('tahun', $year)->where('bulan', '<=', $month);[m
[32m+[m[32m                break;[m
[32m+[m[32m            case 'monthly':[m
[32m+[m[32m                // Monthly: For a specific year and month[m
[32m+[m[32m                $query->where('tahun', $year)->where('bulan', $month);[m
[32m+[m[32m                break;[m
[32m+[m[32m            case 'annual':[m
[32m+[m[32m                // Annual: For all 12 months of a specific year[m
[32m+[m[32m                $query->where('tahun', $year);[m
[32m+[m[32m                break;[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    public function fetchWitelPerformanceData(Request $request)[m
[32m+[m[32m    {[m
[32m+[m[32m        // Validation[m
[32m+[m[32m        $validator = Validator::make($request->all(), [[m
[32m+[m[32m            'mode' => 'required|in:ytd,monthly,annual',[m
[32m+[m[32m            'year' => 'required|integer|min:2020',[m
[32m+[m[32m            'month' => 'required|integer|min:1|max:12',[m
[32m+[m[32m            'source' => 'required|in:reguler,ngtma',[m
[32m+[m[32m        ]);[m
[32m+[m[32m        if ($validator->fails()) return response()->json(['error' => $validator->errors()], 422);[m
[32m+[m
[32m+[m[32m        $dbSource = $request->source;[m
[32m+[m[32m        $mode = $request->mode;[m
[32m+[m
[32m+[m[32m        $now = Carbon::now();[m
[32m+[m[32m        $year = $request->input('year', $now->year);[m
[32m+[m[32m        $month = $request->input('month', $now->month);[m
[32m+[m
[32m+[m[32m        if ($mode === 'ytd') {[m
[32m+[m[32m            $year = $now->year;[m
[32m+[m[32m            $month = $now->month;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Get all Witels[m
[32m+[m[32m        $witels = DB::table('witel')->select('id', 'nama')->get()->keyBy('id');[m
[32m+[m
[32m+[m[32m        // Get Annual Target Revenue for all Witels[m
[32m+[m[32m        $targetsSubquery = DB::table('cc_revenues')[m
[32m+[m[32m            ->select(DB::raw('CASE WHEN divisi_id IN (1, 2) THEN witel_ho_id WHEN divisi_id = 3 THEN witel_bill_id END as witel_id'), DB::raw('SUM(target_revenue) as targetM'))[m
[32m+[m[32m            ->where('tipe_revenue', $dbSource)[m
[32m+[m[32m            ->groupBy('witel_id');[m
[32m+[m[32m        $this->applyDateFilters($targetsSubquery, $mode, $year, $month);[m
[32m+[m[32m        //$targets = DB::query()->fromSub($targetsSubquery, 't')->whereNotNull('witel_id')->pluck('targetM', 'witel_id');[m
[32m+[m[32m        $targets = $targetsSubquery->whereNotNull('witel_id')->pluck('targetM', 'witel_id');[m
[32m+[m
[32m+[m[32m        // Get YTD Real Revenue for all Witels[m
[32m+[m[32m        $revenueSubquery = DB::table('cc_revenues')[m
[32m+[m[32m            ->select(DB::raw('CASE WHEN divisi_id IN (1, 2) THEN witel_ho_id WHEN divisi_id = 3 THEN witel_bill_id END as witel_id'), DB::raw('SUM(real_revenue) as revenueM'))[m
[32m+[m[32m            ->where('tipe_revenue', $dbSource)[m
[32m+[m[32m            ->groupBy('witel_id');[m
[32m+[m[32m        $this->applyDateFilters($revenueSubquery, $mode, $year, $month);[m
[32m+[m[32m        //$revenues = DB::query()->fromSub($revenueSubquery, 'r')->whereNotNull('witel_id')->pluck('revenueM', 'witel_id');[m
[32m+[m[32m        $revenues = $revenueSubquery->whereNotNull('witel_id')->pluck('revenueM', 'witel_id');[m
[32m+[m
[32m+[m[32m        // Get ALL Customers for ALL Witels for the selected MONTH[m
[32m+[m[32m        //$allCustomers = DB::table('cc_revenues')[m
[32m+[m[32m        //    ->select([m
[32m+[m[32m        //        'nama_cc',[m
[32m+[m[32m        //        DB::raw('SUM(real_revenue) as total_revenue'),[m
[32m+[m[32m        //        DB::raw('CASE[m
[32m+[m[32m        //                    WHEN divisi_id IN (1, 2) THEN witel_ho_id[m
[32m+[m[32m        //                    WHEN divisi_id = 3 THEN witel_bill_id[m
[32m+[m[32m        //                END as witel_id')[m
[32m+[m[32m        //    )[m
[32m+[m[32m        //    ->where('tipe_revenue', $dbSource)[m
[32m+[m[32m        //    ->where('tahun', $year)[m
[32m+[m[32m        //    ->where('bulan', $month)[m
[32m+[m[32m        //    ->whereNotNull(DB::raw('CASE WHEN divisi_id IN (1, 2) THEN witel_ho_id WHEN divisi_id = 3 THEN witel_bill_id END'))[m
[32m+[m[32m        //    ->groupBy('witel_id', 'nama_cc')[m
[32m+[m[32m        //    ->orderBy('witel_id')[m
[32m+[m[32m        //    ->orderByDesc('total_revenue')[m
[32m+[m[32m        //    ->get();[m
[32m+[m
[32m+[m[32m        $customersQuery = DB::table('cc_revenues')[m
[32m+[m[32m            ->select('nama_cc', DB::raw('SUM(real_revenue) as total_revenue'), DB::raw('CASE WHEN division_id IN (1, 2) THEN witel_ho_id WHEN division_id = 3 THEN witel_bill_id END as witel_id'))[m
[32m+[m[32m            ->where('tipe_revenue', $dbSource)[m
[32m+[m[32m            ->groupBy('witel_id', 'nama_cc')[m
[32m+[m[32m            ->orderBy('witel_id')[m
[32m+[m[32m            ->orderByDesc('total_revenue');[m
[32m+[m[32m        $this->applyDateFilters($customersQuery, $mode, $year, $month);[m
[32m+[m[32m        $allCustomers = $customersQuery->whereNotNull(DB::raw('CASE WHEN division_id IN (1, 2) THEN witel_ho_id WHEN division_id = 3 THEN witel_bill_id END'))->get();[m
[32m+[m
[32m+[m[32m        // Process customers into a map for easy lookup[m
[32m+[m[32m        $customerMap = [];[m
[32m+[m[32m        foreach ($allCustomers as $row) {[m
[32m+[m[32m            $customerMap[$row->witel_id][] = $row;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Build, Calculate, and Sort the final combined data[m
[32m+[m[32m        $leaderboard = [];[m
[32m+[m[32m        foreach ($witels as $id => $witel) {[m
[32m+[m[32m            $revenue = $revenues->get($id) ?? 0;[m
[32m+[m[32m            $target = $targets->get($id) ?? 0;[m
[32m+[m[32m            $achievement = ($target > 0) ? ($revenue / $target) * 100 : null;[m
[32m+[m
[32m+[m[32m            $leaderboard[] = [[m
[32m+[m[32m                'id' => $id,[m
[32m+[m[32m                'name' => $witel->nama,[m
[32m+[m[32m                'revenueM' => $revenue,[m
[32m+[m[32m                'targetM' => $target,[m
[32m+[m[32m                'achievement' => $achievement,[m
[32m+[m[32m                'customers' => $customerMap[$id] ?? [],[m
[32m+[m[32m            ];[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Sort the final leaderboard[m
[32m+[m[32m        usort($leaderboard, function ($a, $b) {[m
[32m+[m[32m            $aAch = $a['achievement'] ?? -1;[m
[32m+[m[32m            $bAch = $b['achievement'] ?? -1;[m
[32m+[m[32m            if ($aAch !== $bAch) return $bAch <=> $aAch;[m
[32m+[m[32m            return $b['revenueM'] <=> $a['revenueM'];[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        Log::info("CCW Controller", ['returned' => $leaderboard]);[m
[32m+[m
[32m+[m[32m        return response()->json($leaderboard);[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[1mdiff --git a/app/Support/CCWRevenueAggregator.php b/app/Support/CCWRevenueAggregator.php[m
[1mnew file mode 100644[m
[1mindex 0000000..983c50d[m
[1m--- /dev/null[m
[1m+++ b/app/Support/CCWRevenueAggregator.php[m
[36m@@ -0,0 +1,66 @@[m
[32m+[m[32m<?php[m
[32m+[m
[32m+[m[32m// NOTE: Status Script: Unknown if Used or Not (VERDICT: NOT USED)[m
[32m+[m
[32m+[m[32mnamespace App\Support;[m
[32m+[m
[32m+[m[32muse Illuminate\Support\Facades\DB;[m
[32m+[m
[32m+[m[32mclass CCWRevenueAggregator[m
[32m+[m[32m{[m
[32m+[m[32m    /**[m
[32m+[m[32m     * Return standardized series arrays for a given year and source.[m
[32m+[m[32m     * [[m
[32m+[m[32m     *   'months' => [1..12],[m
[32m+[m[32m     *   'dgs' => [12], 'dps' => [12], 'dss' => [12][m
[32m+[m[32m     * ][m
[32m+[m[32m     */[m
[32m+[m[32m    public static function yearlySeries(int $year, string $source): array[m
[32m+[m[32m    {[m
[32m+[m[32m        $months = range(1, 12);[m
[32m+[m
[32m+[m[32m        // Base query: group by (division, month)[m
[32m+[m[32m        $q = DB::table('cc_revenues')[m
[32m+[m[32m            ->select([[m
[32m+[m[32m                'divisi_id',[m
[32m+[m[32m                'bulan',[m
[32m+[m[32m                DB::raw('SUM(real_revenue) as total'),[m
[32m+[m[32m            ])[m
[32m+[m[32m            ->where('tahun', $year)[m
[32m+[m[32m            ->where('tipe_revenue', $source);[m
[32m+[m
[32m+[m[32m        // NOTE: DGS: 1, DSS: 2, DPS: 3[m
[32m+[m
[32m+[m[32m        // For ngtma, impose metric rule;[m
[32m+[m[32m        // for non-ngtma we donâ€™t filter metric (or you can if your schema needs it)[m
[32m+[m[32m        if ($source === 'NGTMA') {[m
[32m+[m[32m            $q->where(function ($qq) {[m
[32m+[m[32m                $qq->where(function ($q1) {[m
[32m+[m[32m                    $q1->where('divisi_id', 3)->where('revenue_source', 'BILL');[m
[32m+[m[32m                })->orWhere(function ($q2) {[m
[32m+[m[32m                    $q2->whereIn('divisi_id', [1, 2])->where('revenue_source', 'SOLD');[m
[32m+[m[32m                });[m
[32m+[m[32m            });[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        $rows = $q->groupBy('divisi_id', 'bulan')->get();[m
[32m+[m
[32m+[m[32m        // Initialize zero-filled[m
[32m+[m[32m        $series = [[m
[32m+[m[32m            'months' => $months,[m
[32m+[m[32m            'dgs' => array_fill(0, 12, 0),[m
[32m+[m[32m            'dps' => array_fill(0, 12, 0),[m
[32m+[m[32m            'dss' => array_fill(0, 12, 0),[m
[32m+[m[32m        ];[m
[32m+[m
[32m+[m[32m        foreach ($rows as $r) {[m
[32m+[m[32m            $idx = (int)$r->bulan - 1;[m
[32m+[m[32m            if ($idx < 0 || $idx > 11) continue;[m
[32m+[m[32m            $key = strtolower($r->divisi_id);[m
[32m+[m[32m            if (!isset($series[$key])) continue;[m
[32m+[m[32m            $series[$key][$idx] = (float)$r->total;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        return $series;[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[1mdiff --git a/config/blade-icons.php b/config/blade-icons.php[m
[1mnew file mode 100644[m
[1mindex 0000000..086f2a0[m
[1m--- /dev/null[m
[1m+++ b/config/blade-icons.php[m
[36m@@ -0,0 +1,188 @@[m
[32m+[m[32m<?php[m
[32m+[m
[32m+[m[32mreturn [[m
[32m+[m[32m    'collections' => [[m
[32m+[m[32m        'lucide' => [[m
[32m+[m[32m            'class' => 'w-4 h-4 inline-block align-middle flex-none',[m
[32m+[m[32m        ],[m
[32m+[m[32m    ],[m
[32m+[m
[32m+[m[32m    /*[m
[32m+[m[32m    |--------------------------------------------------------------------------[m
[32m+[m[32m    | Icons Sets[m
[32m+[m[32m    |--------------------------------------------------------------------------[m
[32m+[m[32m    |[m
[32m+[m[32m    | With this config option you can define a couple of[m
[32m+[m[32m    | default icon sets. Provide a key name for your icon[m
[32m+[m[32m    | set and a combination from the options below.[m
[32m+[m[32m    |[m
[32m+[m[32m    */[m
[32m+[m
[32m+[m[32m    'sets' => [[m
[32m+[m
[32m+[m[32m        // 'default' => [[m
[32m+[m[32m        //[m
[32m+[m[32m        //     /*[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     | Icons Path[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     | Provide the relative path from your app root to your SVG icons[m
[32m+[m[32m        //     | directory. Icons are loaded recursively so there's no need to[m
[32m+[m[32m        //     | list every sub-directory.[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     | Relative to the disk root when the disk option is set.[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     */[m
[32m+[m[32m        //[m
[32m+[m[32m        //     'path' => 'resources/svg',[m
[32m+[m[32m        //[m
[32m+[m[32m        //     /*[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     | Filesystem Disk[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     | Optionally, provide a specific filesystem disk to read[m
[32m+[m[32m        //     | icons from. When defining a disk, the "path" option[m
[32m+[m[32m        //     | starts relatively from the disk root.[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     */[m
[32m+[m[32m        //[m
[32m+[m[32m        //     'disk' => '',[m
[32m+[m[32m        //[m
[32m+[m[32m        //     /*[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     | Default Prefix[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     | This config option allows you to define a default prefix for[m
[32m+[m[32m        //     | your icons. The dash separator will be applied automatically[m
[32m+[m[32m        //     | to every icon name. It's required and needs to be unique.[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     */[m
[32m+[m[32m        //[m
[32m+[m[32m        //     'prefix' => 'icon',[m
[32m+[m[32m        //[m
[32m+[m[32m        //     /*[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     | Fallback Icon[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     | This config option allows you to define a fallback[m
[32m+[m[32m        //     | icon when an icon in this set cannot be found.[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     */[m
[32m+[m[32m        //[m
[32m+[m[32m        //     'fallback' => '',[m
[32m+[m[32m        //[m
[32m+[m[32m        //     /*[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     | Default Set Classes[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     | This config option allows you to define some classes which[m
[32m+[m[32m        //     | will be applied by default to all icons within this set.[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     */[m
[32m+[m[32m        //[m
[32m+[m[32m        //     'class' => '',[m
[32m+[m[32m        //[m
[32m+[m[32m        //     /*[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     | Default Set Attributes[m
[32m+[m[32m        //     |-----------------------------------------------------------------[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     | This config option allows you to define some attributes which[m
[32m+[m[32m        //     | will be applied by default to all icons within this set.[m
[32m+[m[32m        //     |[m
[32m+[m[32m        //     */[m
[32m+[m[32m        //[m
[32m+[m[32m        //     'attributes' => [[m
[32m+[m[32m        //         // 'width' => 50,[m
[32m+[m[32m        //         // 'height' => 50,[m
[32m+[m[32m        //     ],[m
[32m+[m[32m        //[m
[32m+[m[32m        // ],[m
[32m+[m
[32m+[m[32m    ],[m
[32m+[m
[32m+[m[32m    /*[m
[32m+[m[32m    |--------------------------------------------------------------------------[m
[32m+[m[32m    | Global Default Classes[m
[32m+[m[32m    |--------------------------------------------------------------------------[m
[32m+[m[32m    |[m
[32m+[m[32m    | This config option allows you to define some classes which[m
[32m+[m[32m    | will be applied by default to all icons.[m
[32m+[m[32m    |[m
[32m+[m[32m    */[m
[32m+[m
[32m+[m[32m    'class' => '',[m
[32m+[m
[32m+[m[32m    /*[m
[32m+[m[32m    |--------------------------------------------------------------------------[m
[32m+[m[32m    | Global Default Attributes[m
[32m+[m[32m    |--------------------------------------------------------------------------[m
[32m+[m[32m    |[m
[32m+[m[32m    | This config option allows you to define some attributes which[m
[32m+[m[32m    | will be applied by default to all icons.[m
[32m+[m[32m    |[m
[32m+[m[32m    */[m
[32m+[m
[32m+[m[32m    'attributes' => [[m
[32m+[m[32m        // 'width' => 50,[m
[32m+[m[32m        // 'height' => 50,[m
[32m+[m[32m    ],[m
[32m+[m
[32m+[m[32m    /*[m
[32m+[m[32m    |--------------------------------------------------------------------------[m
[32m+[m[32m    | Global Fallback Icon[m
[32m+[m[32m    |--------------------------------------------------------------------------[m
[32m+[m[32m    |[m
[32m+[m[32m    | This config option allows you to define a global fallback[m
[32m+[m[32m    | icon when an icon in any set cannot be found. It can[m
[32m+[m[32m    | reference any icon from any configured set.[m
[32m+[m[32m    |[m
[32m+[m[32m    */[m
[32m+[m
[32m+[m[32m    'fallback' => '',[m
[32m+[m
[32m+[m[32m    /*[m
[32m+[m[32m    |--------------------------------------------------------------------------[m
[32m+[m[32m    | Components[m
[32m+[m[32m    |--------------------------------------------------------------------------[m
[32m+[m[32m    |[m
[32m+[m[32m    | These config options allow you to define some[m
[32m+[m[32m    | settings related to Blade Components.[m
[32m+[m[32m    |[m
[32m+[m[32m    */[m
[32m+[m
[32m+[m[32m    'components' => [[m
[32m+[m
[32m+[m[32m        /*[m
[32m+[m[32m        |----------------------------------------------------------------------[m
[32m+[m[32m        | Disable Components[m
[32m+[m[32m        |----------------------------------------------------------------------[m
[32m+[m[32m        |[m
[32m+[m[32m        | This config option allows you to disable Blade components[m
[32m+[m[32m        | completely. It's useful to avoid performance problems[m
[32m+[m[32m        | when working with large icon libraries.[m
[32m+[m[32m        |[m
[32m+[m[32m        */[m
[32m+[m
[32m+[m[32m        'disabled' => false,[m
[32m+[m
[32m+[m[32m        /*[m
[32m+[m[32m        |----------------------------------------------------------------------[m
[32m+[m[32m        | Default Icon Component Name[m
[32m+[m[32m        |----------------------------------------------------------------------[m
[32m+[m[32m        |[m
[32m+[m[32m        | This config option allows you to define the name[m
[32m+[m[32m        | for the default Icon class component.[m
[32m+[m[32m        |[m
[32m+[m[32m        */[m
[32m+[m
[32m+[m[32m        'default' => 'icon',[m
[32m+[m
[32m+[m[32m    ],[m
[32m+[m
[32m+[m[32m];[m
[1mdiff --git a/public/css/ccwitel.css b/public/css/ccwitel.css[m
[1mnew file mode 100644[m
[1mindex 0000000..696df83[m
[1m--- /dev/null[m
[1m+++ b/public/css/ccwitel.css[m
[36m@@ -0,0 +1,616 @@[m
[32m+[m[32m/* General page styles */[m
[32m+[m[32mbody {[m
[32m+[m[32m    font-family: 'Segoe UI', system-ui, sans-serif;[m
[32m+[m[32m    background-color: #f3f4f6;[m
[32m+[m[32m    color: #374151;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* NOTE: Trend Revenue CSS */[m
[32m+[m[32m/* Main card container */[m
[32m+[m[32m.trend-revenue-card {[m
[32m+[m[32m    background-color: #ffffff;[m
[32m+[m[32m    border-radius: 12px;[m
[32m+[m[32m    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);[m
[32m+[m[32m    border: 1px solid #e5e7eb;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* Card Header styles */[m
[32m+[m[32m.trend-card-header {[m
[32m+[m[32m    padding: 1.5rem;[m
[32m+[m[32m    border-bottom: 1px solid #e5e7eb;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-main-content {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    justify-content: space-between;[m
[32m+[m[32m    align-items: flex-start;[m
[32m+[m[32m    padding-bottom: 1.5rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-block {[m
[32m+[m[32m    margin-bottom: 1rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-title-section {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    gap: 1rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-icon-wrapper {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    justify-content: center;[m
[32m+[m[32m    width: 48px;[m
[32m+[m[32m    height: 48px;[m
[32m+[m[32m    background: linear-gradient(to bottom right, #3b82f6, #6366f1);[m
[32m+[m[32m    border-radius: 12px;[m
[32m+[m[32m    box-shadow: 0 4px 6px rgba(59, 130, 246, 0.3);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-title {[m
[32m+[m[32m    font-size: 1.5rem;[m
[32m+[m[32m    font-weight: 700;[m
[32m+[m[32m    color: #111827;[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    gap: 0.75rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-subtitle {[m
[32m+[m[32m    font-size: 0.9rem;[m
[32m+[m[32m    color: #6b7280;[m
[32m+[m[32m    margin-top: 0.25rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-date-range {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    gap: 0.5rem;[m
[32m+[m[32m    font-size: 0.875rem;[m
[32m+[m[32m    font-weight: 500;[m
[32m+[m[32m    color: #4b5563;[m
[32m+[m[32m    background-color: #f3f4f6;[m
[32m+[m[32m    padding: 0.5rem 0.75rem;[m
[32m+[m[32m    border-radius: 8px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.filters-form label {[m
[32m+[m[32m    font-size: 0.875rem;[m
[32m+[m[32m    font-weight: 500;[m
[32m+[m[32m    color: #4b5563;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.filters-form select {[m
[32m+[m[32m    border: 1px solid #d1d5db;[m
[32m+[m[32m    border-radius: 6px;[m
[32m+[m[32m    padding: 0.25rem 0.5rem;[m
[32m+[m[32m    font-size: 0.875rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* Card Content */[m
[32m+[m[32m.trend-card-content {[m
[32m+[m[32m    padding: 1.5rem;[m
[32m+[m[32m    min-height: 400px; /* Give canvas space to render */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.error-message {[m
[32m+[m[32m    color: #dc2626;[m
[32m+[m[32m    font-weight: 500;[m
[32m+[m[32m    background-color: #fee2e2;[m
[32m+[m[32m    border: 1px solid #f87171;[m
[32m+[m[32m    padding: 1rem;[m
[32m+[m[32m    border-radius: 8px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* NOTE: new guy in town */[m
[32m+[m[32m.filters-form { display: flex; align-items: center; gap: 1rem; flex-wrap: wrap; }[m
[32m+[m
[32m+[m[32m.filters-form > div {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    gap: 0.5rem; /* This creates the space between the label and the input */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.n-year-stepper {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    gap: 0.3rem; /* Space between buttons and the label */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.n-year-stepper span {[m
[32m+[m[32m    font-weight: 500;[m
[32m+[m[32m    min-width: 62.11px;[m
[32m+[m[32m    max-height: 29.6px;[m
[32m+[m[32m    text-align: center;[m
[32m+[m[32m    background-color: #ffffff;[m
[32m+[m[32m    border: 1px solid #d1d5db;[m
[32m+[m[32m    border-radius: 6px;[m
[32m+[m[32m    padding: 0.25rem 0.5rem;[m
[32m+[m[32m    font-size: 0.875rem; /* Match select box font size */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.n-year-stepper button {[m
[32m+[m[32m    /* Shape & Size */[m
[32m+[m[32m    width: 28px;[m
[32m+[m[32m    height: 28px;[m
[32m+[m[32m    border-radius: 50%; /* This makes it round */[m
[32m+[m
[32m+[m[32m    /* Colors & Border */[m
[32m+[m[32m    background-color: #ffffff; /* White background */[m
[32m+[m[32m    border: 1px solid #d1d5db; /* Grey border */[m
[32m+[m[32m    color: #4b5563; /* Dark grey for the '+' and '-' */[m
[32m+[m
[32m+[m[32m    /* Content Alignment */[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    justify-content: center;[m
[32m+[m[32m    padding: 0;[m
[32m+[m
[32m+[m[32m    /* Interaction */[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    transition: background-color 0.2s, border-color 0.2s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.n-year-stepper button:hover {[m
[32m+[m[32m    background-color: #f9fafb; /* Slight grey on hover */[m
[32m+[m[32m    border-color: #9ca3af;[m
[32m+[m[32m}[m
[32m+[m[32m/*[m
[32m+[m[32m.n-year-stepper button:first-child { border-top-right-radius: 5px; border-bottom-right-radius: 5px; }[m
[32m+[m[32m.n-year-stepper button:last-child { border-top-left-radius: 5px; border-bottom-left-radius: 5px; }[m
[32m+[m[32m*/[m
[32m+[m[32m.chart-container { position: relative; min-height: 400px; }[m
[32m+[m
[32m+[m[32m.chart-container canvas { width: 100%; height: 100%; }[m
[32m+[m
[32m+[m[32m.loading-overlay {[m
[32m+[m[32m    position: absolute; top: 0; left: 0; right: 0; bottom: 0;[m
[32m+[m[32m    background-color: rgba(255, 255, 255, 0.7); z-index: 10;[m
[32m+[m[32m    display: flex; align-items: center; justify-content: center;[m
[32m+[m[32m    transition: opacity 0.3s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.loading-overlay.hidden { opacity: 0; pointer-events: none; }[m
[32m+[m
[32m+[m[32m.spinner { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }[m
[32m+[m
[32m+[m[32m@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }[m
[32m+[m
[32m+[m[32m#start-month-controls label {[m
[32m+[m[32m    white-space: nowrap;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ccw-component {[m
[32m+[m[32m    margin-top: 2rem;[m
[32m+[m[32m    margin-bottom: 2rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* NOTE: Witel Performance CSS */[m
[32m+[m[32m#witel-title-icon {[m
[32m+[m[32m    color: #ef4444; /* Red color */[m
[32m+[m[32m    font-size: 1.25rem; /* Tweak size as needed */[m
[32m+[m[32m    margin-right: 0.75rem; /* Space between icon and title */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- General Layout --- */[m
[32m+[m[32m.witel-performance-layout {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    gap: 1.5rem; /* 24px between columns */[m
[32m+[m[32m    align-items: stretch; /* This makes both columns equal height */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-list-pane {[m
[32m+[m[32m    flex: 1; /* Take up remaining space */[m
[32m+[m[32m    min-width: 450px;[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    flex-direction: column;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-list-pane .card-header {[m
[32m+[m[32m    flex-shrink: 0; /* Header doesn't shrink */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.card-header .header-top-row {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    justify-content: space-between;[m
[32m+[m[32m    align-items: flex-start; /* Aligns top */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.card-header .header-title-group {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center; /* Aligns icon and title */[m
[32m+[m[32m    gap: 0.75rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.card-header .header-bottom-row {[m
[32m+[m[32m    /* This moves the total revenue below the icon/title */[m
[32m+[m[32m    padding-left: 2.75rem; /* 32px icon + 12px gap = 44px */[m
[32m+[m[32m    margin-top: -0.25rem; /* Pulls it up slightly */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-list-pane .card-content {[m
[32m+[m[32m    overflow-y: visible; /* This makes the LIST scrollable */[m
[32m+[m[32m    flex-grow: 1;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-detail-pane {[m
[32m+[m[32m    flex: 0 0 550px;[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    flex-direction: column;[m
[32m+[m
[32m+[m[32m    position: sticky;[m
[32m+[m[32m    top: 1.5rem; /* Adjust this value to match your page's top padding/header */[m
[32m+[m
[32m+[m[32m    width: ;[m
[32m+[m[32m    max-height: 800px; /* You can adjust this value */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-detail-pane .card {[m
[32m+[m[32m    flex-grow: 1;[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    flex-direction: column;[m
[32m+[m[32m}[m
[32m+[m[32m.witel-detail-pane .card-content {[m
[32m+[m[32m    overflow-y: auto; /* This pane WILL scroll internally */[m
[32m+[m[32m    flex-grow: 1;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- Card Overrides (for both panes) --- */[m
[32m+[m[32m/* Assuming a general .card class exists from your main theme */[m
[32m+[m
[32m+[m[32m.witel-layout-card {[m
[32m+[m[32m    background-color: #fff;[m
[32m+[m[32m    border-radius: 12px;[m
[32m+[m[32m    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);[m
[32m+[m[32m    border: 1px solid #e0e0e0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-layout-card-header {[m
[32m+[m[32m    padding: 1.25rem 1.5rem;[m
[32m+[m[32m    border-bottom: 1px solid #f0f0f0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-layout-card-content {[m
[32m+[m[32m    padding: 1.5rem 1.5rem 0 1.5rem;[m
[32m+[m[32m    flex-grow: 1;[m
[32m+[m[32m    overflow-y: auto;[m
[32m+[m[32m    height: 645px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-customer-layout-card-content {[m
[32m+[m[32m    padding: 1.5rem;[m
[32m+[m[32m    flex-grow: 1;[m
[32m+[m[32m    overflow-y: auto;[m
[32m+[m[32m    height: 738px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-layout-card {[m
[32m+[m[32m  background:#fff; border:1px solid var(--brd); border-radius:16px;[m
[32m+[m[32m  box-shadow:var(--shadow-1);[m
[32m+[m[32m  transition:transform var(--tfast), box-shadow var(--tfast), border-color var(--tfast);[m
[32m+[m[32m}[m
[32m+[m[32m.witel-layout-card-body { padding:24px; }[m
[32m+[m
[32m+[m[32m/* Stat tile interaktif */[m
[32m+[m[32m.witel-layout-card-body.align-items-center.gap-3:hover{[m
[32m+[m[32m  background:linear-gradient(135deg, var(--red-600), var(--red-500) 55%, var(--red-400));[m
[32m+[m[32m  color:#fff; border-radius:12px; transform:scale(1.015);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- Filter Controls --- */[m
[32m+[m[32m#witel-filters {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    flex-wrap: wrap; /* Allows filters to wrap on small screens */[m
[32m+[m[32m    gap: 1.5rem; /* Space between filter groups */[m
[32m+[m[32m    padding-top: 1rem; /* Space below title */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m#witel-filters > div {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    gap: 0.5rem; /* Space between label and select */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m#witel-filters .filter-input {[m
[32m+[m[32m    border-color: #d1d5db; /* Default grey border */[m
[32m+[m[32m    border-radius: 8px; /* Slightly more rounded */[m
[32m+[m[32m    padding: 0.4rem 0.8rem; /* Adjusted padding */[m
[32m+[m[32m    font-size: 0.875rem; /* text-sm */[m
[32m+[m[32m    color: #374151; /* text-gray-800 */[m
[32m+[m[32m    background-color: #f9fafb; /* Light grey background */[m
[32m+[m[32m    appearance: none; /* Remove default browser arrow */[m
[32m+[m[32m    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");[m
[32m+[m[32m    background-position: right 0.5rem center;[m
[32m+[m[32m    background-repeat: no-repeat;[m
[32m+[m[32m    background-size: 1.5em 1.5em;[m
[32m+[m[32m    padding-right: 2.5rem; /* Make space for custom arrow */[m
[32m+[m[32m}[m
[32m+[m[32m#witel-filters .filter-input:focus {[m
[32m+[m[32m    border-color: #3b82f6; /* Blue border on focus */[m
[32m+[m[32m    box-shadow: 0 0 0 1px #3b82f6;[m
[32m+[m[32m    outline: none;[m
[32m+[m[32m}[m
[32m+[m[32m#witel-filters label {[m
[32m+[m[32m    color: #4b5563; /* text-gray-600 */[m
[32m+[m[32m    font-size: 0.875rem; /* text-sm */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m#witel-year-filter, #witel-month-filter {[m
[32m+[m[32m    display: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- Witel Card in Leaderboard (.witel-card) --- */[m
[32m+[m[32m.witel-card {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: flex-start;[m
[32m+[m[32m    gap: 0.75rem;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m    background-color: #fff;[m
[32m+[m[32m    border: 1px solid #e0e0e0;[m
[32m+[m[32m    border-radius: 10px; /* Slightly less rounded than main cards */[m
[32m+[m[32m    padding: 1rem 1.25rem;[m
[32m+[m[32m    margin-bottom: 1.5rem;[m
[32m+[m[32m    transition: all 0.2s ease-in-out;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-card.selected::after {[m
[32m+[m[32m    content: '';[m
[32m+[m[32m    position: absolute;[m
[32m+[m[32m    right: -1.5rem; /* The width of the gap between panes */[m
[32m+[m[32m    top: 50%;[m
[32m+[m[32m    transform: translateY(-50%);[m
[32m+[m[32m    width: 0;[m
[32m+[m[32m    height: 0;[m
[32m+[m[32m    border-top: 16px solid transparent;[m
[32m+[m[32m    border-bottom: 16px solid transparent;[m
[32m+[m[32m    /* Matches the card background */[m
[32m+[m[32m    border-left: 16px solid #fff;[m
[32m+[m[32m    /* Use a subtle drop shadow to blend with the page background */[m
[32m+[m[32m    filter: drop-shadow(2px 0px 2px rgba(0,0,0,0.02));[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-card:hover {[m
[32m+[m[32m    border-color: #a7a7a7; /* Darker border on hover */[m
[32m+[m[32m    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); /* Slightly more pronounced shadow */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-card.selected {[m
[32m+[m[32m    border-color: #ff3b42;[m
[32m+[m[32m    background-color: #fff; /* Keep it white to match the arrow */[m
[32m+[m[32m    box-shadow: 0 4px 10px rgba(37, 99, 235, 0.1);[m
[32m+[m[32m    z-index: 10;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-status-dot {[m
[32m+[m[32m    width: 12px;[m
[32m+[m[32m    height: 12px;[m
[32m+[m[32m    border-radius: 50%;[m
[32m+[m[32m    flex-shrink: 0;[m
[32m+[m[32m    border: 1px solid rgba(0,0,0,0.1);[m
[32m+[m[32m    margin-top: 0.25rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-status-dot.bg-green-600 { background-color: #22c55e; }[m
[32m+[m[32m.witel-status-dot.bg-amber-600 { background-color: #f59e0b; }[m
[32m+[m[32m.witel-status-dot.bg-red-600 { background-color: #ef4444; }[m
[32m+[m[32m.witel-status-dot.bg-gray-400 { background-color: #9ca3af; }[m
[32m+[m
[32m+[m[32m.witel-card-content {[m
[32m+[m[32m    flex-grow: 1; /* Takes up all remaining space */[m
[32m+[m[32m    min-width: 0; /* Fixes flexbox text overflow issues */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-card-content .flex-justify-between {[m
[32m+[m[32m     /* This ensures the name/badge and revenue/target are on opposite ends */[m
[32m+[m[32m     display: flex;[m
[32m+[m[32m     justify-content: space-between;[m
[32m+[m[32m     align-items: center;[m
[32m+[m[32m     margin-bottom: 0.75rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-card-name-group {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    gap: 0.5rem; /* Space between dot, name, and badge */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* Progress Bar */[m
[32m+[m[32m.witel-card .progress-bar {[m
[32m+[m[32m    height: 100%;[m
[32m+[m[32m    border-radius: 4px; /* Matches outer bar */[m
[32m+[m[32m    transition: width 0.3s ease-out;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* Progress bar colors based on achievement status dots */[m
[32m+[m[32m.witel-card .progress-bar.bg-green-600 { background-color: #22c55e; }[m
[32m+[m[32m.witel-card .progress-bar.bg-amber-600 { background-color: #f59e0b; }[m
[32m+[m[32m.witel-card .progress-bar.bg-red-600 { background-color: #ef4444; }[m
[32m+[m[32m.witel-card .progress-bar.bg-gray-400 { background-color: #9ca3af; }[m
[32m+[m
[32m+[m[32m.progress-bar-container {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    gap: 0.75rem; /* 12px space */[m
[32m+[m[32m    margin-top: 0.25rem; /* Space below revenue text */[m
[32m+[m[32m}[m
[32m+[m[32m.progress-bar-container .progress-bar-bg {[m
[32m+[m[32m    flex-grow: 1; /* Progress bar takes up available space */[m
[32m+[m[32m    height: 8px;[m
[32m+[m[32m    border-radius: 4px;[m
[32m+[m[32m    background-color: #e5e7eb;[m
[32m+[m[32m    overflow: hidden;[m
[32m+[m[32m}[m
[32m+[m[32m.progress-bar-container [data-el="badge"] {[m
[32m+[m[32m    flex-shrink: 0; /* Badge doesn't shrink */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- Badge Styles --- */[m
[32m+[m[32m.badge {[m
[32m+[m[32m    display: inline-flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    justify-content: center;[m
[32m+[m[32m    padding: 0.2em 0.6em; /* Adjusted padding */[m
[32m+[m[32m    border-radius: 0.375rem; /* Rounded corners */[m
[32m+[m[32m    font-weight: 600; /* Semibold */[m
[32m+[m[32m    line-height: 1;[m
[32m+[m[32m    white-space: nowrap;[m
[32m+[m[32m    background-color: #f0f0f0; /* Default neutral grey */[m
[32m+[m[32m    color: #555; /* Default text color */[m
[32m+[m[32m}[m
[32m+[m[32m.badge-success {[m
[32m+[m[32m    background-color: #d1fae5; /* Light green */[m
[32m+[m[32m    color: #065f46; /* Dark green text */[m
[32m+[m[32m}[m
[32m+[m[32m.badge-warning {[m
[32m+[m[32m    background-color: #fef3c7; /* Light yellow/amber */[m
[32m+[m[32m    color: #92400e; /* Dark amber text */[m
[32m+[m[32m}[m
[32m+[m[32m.badge-danger {[m
[32m+[m[32m    background-color: #fee2e2; /* Light red */[m
[32m+[m[32m    color: #991b1b; /* Dark red text */[m
[32m+[m[32m}[m
[32m+[m[32m.badge-secondary {[m
[32m+[m[32m    background-color: #e5e7eb; /* More subtle grey */[m
[32m+[m[32m    color: #4b5563; /* Grey text */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m[data-el="badge"] {[m
[32m+[m[32m    margin-left: 0.5rem; /* Adds space between name and badge */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- Detail Pane (Right Side) --- */[m
[32m+[m[32m.witel-detail-content {[m
[32m+[m[32m    display: none;[m
[32m+[m[32m    margin-top: 1rem;[m
[32m+[m[32m    padding-left: 1.75rem; /* Indent from the Witel dot */[m
[32m+[m[32m    /* This container will scroll if it gets too long,[m
[32m+[m[32m       but the items inside are styled as lines */[m
[32m+[m[32m    max-height: 400px; /* Example: set a max height */[m
[32m+[m[32m    overflow-y: auto;[m
[32m+[m[32m    padding-right: 1rem; /* Space for scrollbar */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.witel-customer-list, .witel-detail-empty {[m
[32m+[m[32m    height: 645px;[m
[32m+[m[32m    overflow-y: auto;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* This is the new style for each row in the customer list */[m
[32m+[m[32m.customer-list-header {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    justify-content: space-between;[m
[32m+[m[32m    padding: 0 0.5rem 0.85rem 0.5rem; /* Match list item padding */[m
[32m+[m[32m    border-bottom: 2px solid #e5e7eb; /* Stronger border */[m
[32m+[m[32m    margin-bottom: 0.5rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.customer-list-header-label {[m
[32m+[m[32m    font-size: 0.75rem; /* 12px */[m
[32m+[m[32m    font-weight: 600;[m
[32m+[m[32m    color: #6b7280; /* text-gray-500 */[m
[32m+[m[32m    text-transform: uppercase;[m
[32m+[m[32m    letter-spacing: 0.05em;[m
[32m+[m[32m    margin-right: 13px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* This part aligns the header text with the columns below */[m
[32m+[m[32m.customer-list-header-left {[m
[32m+[m[32m    /* This just needs to be here */[m
[32m+[m[32m}[m
[32m+[m[32m.customer-list-header-right {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    gap: 1.5rem; /* 24px, matches .customer-stats */[m
[32m+[m[32m}[m
[32m+[m[32m.customer-list-header-right span:nth-child(1) { /* Share */[m
[32m+[m[32m    width: 50px;[m
[32m+[m[32m    text-align: right;[m
[32m+[m[32m}[m
[32m+[m[32m.customer-list-header-right span:nth-child(2) { /* Nominal */[m
[32m+[m[32m    width: 80px;[m
[32m+[m[32m    text-align: right;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.customer-list-row {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    justify-content: space-between; /* Pushes name and stats apart */[m
[32m+[m[32m    padding: 0.85rem 0.5rem; /* 14px top/bottom, 8px left/right */[m
[32m+[m[32m    border-bottom: 1px solid #f0f0f0; /* Light grey bottom border */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.customer-list-row:last-child {[m
[32m+[m[32m    border-bottom: none; /* No border on the last item */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* Left side: Rank + Name */[m
[32m+[m[32m.customer-info {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    gap: 0.85rem; /* 14px space */[m
[32m+[m[32m    min-width: 0; /* Fixes flexbox truncation */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* Right side: Percent + Revenue */[m
[32m+[m[32m.customer-stats {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    gap: 1.5rem; /* 24px space */[m
[32m+[m[32m    flex-shrink: 0; /* Prevents this part from shrinking */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m[data-el="customer-name"] {[m
[32m+[m[32m    font-size: 0.9rem; /* 14px */[m
[32m+[m[32m    font-weight: 500;[m
[32m+[m[32m    color: #1f2937;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m[data-el="percentage"] {[m
[32m+[m[32m    font-size: 0.875rem; /* 14px */[m
[32m+[m[32m    color: #4b5563; /* text-gray-600 */[m
[32m+[m[32m    width: 50px; /* Gives it a fixed width for alignment */[m
[32m+[m[32m    text-align: right;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m[data-el="revenue"] {[m
[32m+[m[32m    font-size: 0.9rem; /* 14px */[m
[32m+[m[32m    font-weight: 600;[m
[32m+[m[32m    color: #1f2937;[m
[32m+[m[32m    width: 110px; /* Gives it a fixed width */[m
[32m+[m[32m    text-align: right;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- NEW: Rank Badge Styling (as seen in image) --- */[m
[32m+[m[32m[data-el="rank-badge"] {[m
[32m+[m[32m    width: 28px;  /* 1.75rem */[m
[32m+[m[32m    height: 28px; /* 1.75rem */[m
[32m+[m[32m    border-radius: 50%;[m
[32m+[m[32m    display: grid;[m
[32m+[m[32m    place-items: center;[m
[32m+[m[32m    font-size: 0.8rem;[m
[32m+[m[32m    font-weight: 700;[m
[32m+[m[32m    flex-shrink: 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* Default (Rank 4+) */[m
[32m+[m[32m.rank-default {[m
[32m+[m[32m    background-color: #f3f4f6; /* bg-gray-100 */[m
[32m+[m[32m    color: #4b5563; /* text-gray-600 */[m
[32m+[m[32m}[m
[32m+[m[32m/* Rank 1 (Gold) */[m
[32m+[m[32m.rank-gold {[m
[32m+[m[32m    background-color: #fef08a; /* bg-yellow-200 */[m
[32m+[m[32m    color: #854d0e; /* text-yellow-800 */[m
[32m+[m[32m}[m
[32m+[m[32m/* Rank 2 (Silver) */[m
[32m+[m[32m.rank-silver {[m
[32m+[m[32m    background-color: #e5e7eb; /* bg-gray-200 */[m
[32m+[m[32m    color: #374151; /* text-gray-800 */[m
[32m+[m[32m}[m
[32m+[m[32m/* Rank 3 (Bronze) */[m
[32m+[m[32m.rank-bronze {[m
[32m+[m[32m    background-color: #fde68a; /* bg-amber-200 */[m
[32m+[m[32m    color: #854d0e; /* text-amber-800 */[m
[32m+[m[32m}[m
[1mdiff --git a/public/css/inertia.css b/public/css/inertia.css[m
[1mindex bcf02e2..feaf265 100644[m
[1m--- a/public/css/inertia.css[m
[1m+++ b/public/css/inertia.css[m
[36m@@ -11,34 +11,34 @@[m [m:root {[m
     --telkom-red-dark: #c41e24;[m
     --telkom-red-subtle: rgba(234, 29, 37, 0.06);[m
     --telkom-red-soft: rgba(234, 29, 37, 0.03);[m
[31m-    [m
[32m+[m
     /* Division Brand Colors */[m
     --dgs-primary: #bf8f00;[m
     --dgs-subtle: rgba(191, 143, 0, 0.08);[m
     --dgs-soft: rgba(191, 143, 0, 0.04);[m
[31m-    [m
[32m+[m
     --dps-primary: #0070c0;[m
     --dps-light: #3d8dd6;[m
     --dps-dark: #005a9e;[m
     --dps-subtle: rgba(0, 112, 192, 0.08);[m
     --dps-soft: rgba(0, 112, 192, 0.04);[m
[31m-    [m
[32m+[m
     --dss-primary: #203764;[m
     --dss-light: #3d507a;[m
     --dss-dark: #182949;[m
     --dss-subtle: rgba(32, 55, 100, 0.08);[m
     --dss-soft: rgba(32, 55, 100, 0.04);[m
[31m-    [m
[32m+[m
     --des-primary: #0d5adb;[m
     --des-light: #3d7aed;[m
     --des-dark: #0a4bb8;[m
     --des-subtle: rgba(13, 90, 219, 0.08);[m
     --des-soft: rgba(13, 90, 219, 0.04);[m
[31m-    [m
[32m+[m
     /* Corporate Colors */[m
     --dark-azure: #08355f;[m
     --light-blue: #f5f7fa;[m
[31m-    [m
[32m+[m
     /* Status Colors */[m
     --success: #10b981;[m
     --success-light: rgba(16, 185, 129, 0.08);[m
[36m@@ -49,7 +49,7 @@[m [m:root {[m
     --error: #ef4444;[m
     --error-light: rgba(239, 68, 68, 0.08);[m
     --error-dark: #dc2626;[m
[31m-    [m
[32m+[m
     /* Enhanced Neutral Palette */[m
     --white: #ffffff;[m
     --gray-25: #fdfdfd;[m
[36m@@ -63,7 +63,7 @@[m [m:root {[m
     --gray-700: #2d3748;[m
     --gray-800: #1a202c;[m
     --gray-900: #171923;[m
[31m-    [m
[32m+[m
     /* Premium Shadows */[m
     --shadow-xs: 0 1px 2px 0 rgba(16, 24, 40, 0.04);[m
     --shadow-sm: 0 1px 3px 0 rgba(16, 24, 40, 0.06), 0 1px 2px -1px rgba(16, 24, 40, 0.06);[m
[36m@@ -73,7 +73,7 @@[m [m:root {[m
     --shadow-2xl: 0 24px 48px -12px rgba(16, 24, 40, 0.18);[m
     --shadow-card: 0 1px 3px 0 rgba(16, 24, 40, 0.04), 0 1px 2px -1px rgba(16, 24, 40, 0.04);[m
     --shadow-card-hover: 0 4px 16px -2px rgba(16, 24, 40, 0.08), 0 2px 8px -2px rgba(16, 24, 40, 0.04);[m
[31m-    [m
[32m+[m
     /* Modern Gradients */[m
     --gradient-red: linear-gradient(135deg, var(--telkom-red) 0%, #d61921 100%);[m
     --gradient-blue: linear-gradient(135deg, var(--dps-primary) 0%, var(--dps-dark) 100%);[m
[36m@@ -81,7 +81,7 @@[m [m:root {[m
     --gradient-navy: linear-gradient(135deg, var(--dss-primary) 0%, var(--dss-dark) 100%);[m
     --gradient-sky: linear-gradient(135deg, var(--des-primary) 0%, var(--des-dark) 100%);[m
     --gradient-subtle: linear-gradient(135deg, var(--gray-25) 0%, var(--gray-50) 100%);[m
[31m-    [m
[32m+[m
     /* Border Radius */[m
     --radius-xs: 4px;[m
     --radius-sm: 6px;[m
[36m@@ -90,17 +90,17 @@[m [m:root {[m
     --radius-xl: 16px;[m
     --radius-2xl: 20px;[m
     --radius-3xl: 24px;[m
[31m-    [m
[32m+[m
     /* Modern Transitions */[m
     --transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);[m
     --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);[m
     --transition-slow: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);[m
     --transition-bounce: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);[m
[31m-    [m
[32m+[m
     /* Typography */[m
     --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;[m
     --font-mono: 'JetBrains Mono', 'SF Mono', Consolas, monospace;[m
 }[m
 [m
 .section-block { border-radius: var(--radius-xl); box-shadow:  var(--shadow-card); min-height: auto; padding: 0; }[m
[31m-.section-block:hover { box-shadow:  var(--shadow-card-hover); transform: none; }[m
\ No newline at end of file[m
[32m+[m[32m.section-block:hover { box-shadow:  var(--shadow-card-hover); transform: none; }[m
[1mdiff --git a/public/js/cc_witel/trend_revenue.js b/public/js/cc_witel/trend_revenue.js[m
[1mnew file mode 100644[m
[1mindex 0000000..0bd488a[m
[1m--- /dev/null[m
[1m+++ b/public/js/cc_witel/trend_revenue.js[m
[36m@@ -0,0 +1,140 @@[m
[32m+[m[32m(function() {[m
[32m+[m[32m    const root = document.getElementById('trend-revenue');[m
[32m+[m[32m    if (!root) return;[m
[32m+[m
[32m+[m[32m    const svg = document.getElementById('treg3-chart');[m
[32m+[m[32m    const state = {[m
[32m+[m[32m        year: +root.dataset.year,[m
[32m+[m[32m        month: +root.dataset.month,[m
[32m+[m[32m        division: root.dataset.division,[m
[32m+[m[32m        source: root.dataset.source,[m
[32m+[m[32m        // We could embed raw series via a <script type="application/json"> tag if needed.[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    // Fetch chart data from embedded JSON if you prefer:[m
[32m+[m[32m    // const data = JSON.parse(document.getElementById('treg3-data').textContent);[m
[32m+[m
[32m+[m[32m    // For parity with Blade logic: read precomputed series from window var if emitted[m
[32m+[m[32m    const pre = window.__TREG3__ || {};[m
[32m+[m[32m    const chart = pre.chart || window.chart || null; // allow you to inline via <script>[m
[32m+[m[32m    if (!chart) {[m
[32m+[m[32m        // Optional: you can serialize $chart to a JSON tag and read here.[m
[32m+[m[32m        // For now we compute from DOM via data attributes if you inject them.[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // Axes constants[m
[32m+[m[32m    const W = 900, H = 320, L = 60, R = 20, T = 20, B = 40;[m
[32m+[m[32m    const PW = W - L - R, PH = H - T - B;[m
[32m+[m
[32m+[m[32m    function clear() {[m
[32m+[m[32m        while (svg.firstChild) svg.removeChild(svg.firstChild);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    function line(x1, y1, x2, y2, stroke) {[m
[32m+[m[32m        const el = document.createElementNS('http://www.w3.org/2000/svg', 'line');[m
[32m+[m[32m        el.setAttribute('x1', x1); el.setAttribute('y1', y1);[m
[32m+[m[32m        el.setAttribute('x2', x2); el.setAttribute('y2', y2);[m
[32m+[m[32m        el.setAttribute('stroke', stroke || '#e5e7eb');[m
[32m+[m[32m        svg.appendChild(el);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    function text(x, y, txt, anchor = 'start', size = 11, fill = '#6b7280') {[m
[32m+[m[32m        const el = document.createElementNS('http://www.w3.org/2000/svg', 'text');[m
[32m+[m[32m        el.setAttribute('x', x); el.setAttribute('y', y);[m
[32m+[m[32m        el.setAttribute('font-size', size);[m
[32m+[m[32m        el.setAttribute('fill', fill);[m
[32m+[m[32m        el.setAttribute('text-anchor', anchor);[m
[32m+[m[32m        el.textContent = txt;[m
[32m+[m[32m        svg.appendChild(el);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    function polyline(points, strokeWidth = 2) {[m
[32m+[m[32m        const el = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');[m
[32m+[m[32m        el.setAttribute('points', points.map(p => p.join(',')).join(' '));[m
[32m+[m[32m        el.setAttribute('fill', 'none');[m
[32m+[m[32m        el.setAttribute('stroke-width', strokeWidth);[m
[32m+[m[32m        svg.appendChild(el);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    function scaleX(i) { return L + i * (PW / 11); }[m
[32m+[m[32m    function scaleY(v, maxY) { return T + (PH * (1 - (v / (maxY || 1)))); }[m
[32m+[m
[32m+[m[32m    function draw(chart) {[m
[32m+[m[32m        clear();[m
[32m+[m
[32m+[m[32m        const dgs = chart.dgs || [];[m
[32m+[m[32m        const dps = chart.dps || [];[m
[32m+[m[32m        const dss = chart.dss || [];[m
[32m+[m[32m        const months = chart.months || Array.from({ length: 12 }, (_, i) => i + 1);[m
[32m+[m[32m        const maxY = Math.max([m
[32m+[m[32m            Math.max(...dgs, 0),[m
[32m+[m[32m            Math.max(...dps, 0),[m
[32m+[m[32m            Math.max(...dss, 0),[m
[32m+[m[32m            1[m
[32m+[m[32m        );[m
[32m+[m
[32m+[m[32m        // axes[m
[32m+[m[32m        line(L, T, L, H - B, '#e5e7eb');[m
[32m+[m[32m        line(L, H - B, W - R, H - B, '#e5e7eb');[m
[32m+[m
[32m+[m[32m        // grid + y labels (0..100%)[m
[32m+[m[32m        for (let i = 0; i <= 4; i++) {[m
[32m+[m[32m            const val = maxY * i / 4;[m
[32m+[m[32m            const y = scaleY(val, maxY);[m
[32m+[m[32m            line(L, y, W - R, y, '#f3f4f6');[m
[32m+[m[32m            text(L - 8, y + 4, `${val.toFixed(2)} B`, 'end');[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // x labels[m
[32m+[m[32m        for (let i = 0; i < months.length; i++) {[m
[32m+[m[32m            const x = scaleX(i);[m
[32m+[m[32m            const d = new Date(2025, months[i] - 1, 1); // month name only[m
[32m+[m[32m            text(x, H - B + 16, d.toLocaleString('en', { month: 'short' }), 'middle');[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // lines (no explicit colors)[m
[32m+[m[32m        polyline(dgs.map((v, i) => [scaleX(i), scaleY(v, maxY)]));[m
[32m+[m[32m        polyline(dps.map((v, i) => [scaleX(i), scaleY(v, maxY)]));[m
[32m+[m[32m        polyline(dss.map((v, i) => [scaleX(i), scaleY(v, maxY)]));[m
[32m+[m
[32m+[m[32m        // legend[m
[32m+[m[32m        const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');[m
[32m+[m[32m        g.setAttribute('transform', `translate(${L}, ${T})`);[m
[32m+[m[32m        svg.appendChild(g);[m
[32m+[m[32m        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');[m
[32m+[m[32m        rect.setAttribute('width', 130); rect.setAttribute('height', 54);[m
[32m+[m[32m        rect.setAttribute('fill', 'white'); rect.setAttribute('stroke', '#e5e7eb');[m
[32m+[m[32m        rect.setAttribute('rx', 8);[m
[32m+[m[32m        g.appendChild(rect);[m
[32m+[m[32m        const t1 = document.createElementNS('http://www.w3.org/2000/svg', 'text');[m
[32m+[m[32m        t1.setAttribute('x', 10); t1.setAttribute('y', 16);[m
[32m+[m[32m        t1.setAttribute('font-size', 12); t1.setAttribute('fill', '#111827');[m
[32m+[m[32m        t1.textContent = 'Legend'; g.appendChild(t1);[m
[32m+[m[32m        const t2 = document.createElementNS('http://www.w3.org/2000/svg', 'text');[m
[32m+[m[32m        t2.setAttribute('x', 10); t2.setAttribute('y', 34);[m
[32m+[m[32m        t2.setAttribute('font-size', 11); t2.setAttribute('fill', '#374151');[m
[32m+[m[32m        t2.textContent = 'DGS / DPS / DSS'; g.appendChild(t2);[m
[32m+[m[32m        const t3 = document.createElementNS('http://www.w3.org/2000/svg', 'text');[m
[32m+[m[32m        t3.setAttribute('x', 10); t3.setAttribute('y', 50);[m
[32m+[m[32m        t3.setAttribute('font-size', 11); t3.setAttribute('fill', '#6b7280');[m
[32m+[m[32m        t3.textContent = '(Billions)'; g.appendChild(t3);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // Bootstrap: you can safely inject chart JSON via a global set in the Blade view:[m
[32m+[m[32m    // window.__TREG3__ = { chart: {!! json_encode($chart) !!} }[m
[32m+[m[32m    // To avoid inline, you can also embed in a <script type="application/json" id="treg3-json"> tag.[m
[32m+[m
[32m+[m[32m    // If backend emits the chart object:[m
[32m+[m[32m    if (window.__TREG3__ && window.__TREG3__.chart) {[m
[32m+[m[32m        draw(window.__TREG3__.chart);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // Hook filters purely for parity (form submit == full reload)[m
[32m+[m[32m    const form = document.getElementById('treg3-filters');[m
[32m+[m[32m    if (form) {[m
[32m+[m[32m        form.addEventListener('submit', function(e) {[m
[32m+[m[32m            // Donâ€™t intercept: server computes and re-renders (MVC)[m
[32m+[m[32m            // If you want SPA-ish, swap for fetch+draw here; you asked MVC, so reload is correct.[m
[32m+[m[32m        });[m
[32m+[m[32m    }[m
[32m+[m[32m})();[m
[1mdiff --git a/resources/views/cc_witel/cc-witel-performance-backup.blade.php b/resources/views/cc_witel/cc-witel-performance-backup.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..fcf99a0[m
[1m--- /dev/null[m
[1m+++ b/resources/views/cc_witel/cc-witel-performance-backup.blade.php[m
[36m@@ -0,0 +1,149 @@[m
[32m+[m[32m@extends('layouts.main')[m
[32m+[m
[32m+[m[32m@section('content')[m
[32m+[m[32m<div class="p-6 space-y-6">[m
[32m+[m[32m  <div class="flex items-center justify-between">[m
[32m+[m[32m    <h1 class="text-2xl font-semibold">TREG 3 Dashboard</h1>[m
[32m+[m
[32m+[m[32m    <div class="flex items-center gap-2">[m
[32m+[m[32m      <!-- Export dropdown -->[m
[32m+[m[32m      <div x-data="{open:false}" class="relative">[m
[32m+[m[32m        <button @click="open=!open" class="inline-flex items-center gap-2 rounded-lg border px-3 py-2 hover:bg-gray-50">[m
[32m+[m[32m          <x-lucide-download class="w-4 h-4" />[m
[32m+[m[32m          Export[m
[32m+[m[32m        </button>[m
[32m+[m[32m        <div x-show="open" @click.away="open=false" class="absolute right-0 mt-1 w-44 rounded-lg border bg-white shadow">[m
[32m+[m[32m          <a href="{{ route('dashboard.treg3.export', request()->query()+['mode'=>'filtered']) }}" class="block px-3 py-2 hover:bg-gray-50">Export (Filtered)</a>[m
[32m+[m[32m          <a href="{{ route('dashboard.treg3.export', request()->query()+['mode'=>'ytd']) }}" class="block px-3 py-2 hover:bg-gray-50">Export (YTD)</a>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <!-- Refresh cache -->[m
[32m+[m[32m      <a href="{{ route('dashboard.treg3.index', request()->query()+['refresh'=>1]) }}"[m
[32m+[m[32m         class="inline-flex items-center gap-2 rounded-lg border px-3 py-2 hover:bg-gray-50">[m
[32m+[m[32m        <x-lucide-refresh-cw class="w-4 h-4" /> Refresh[m
[32m+[m[32m      </a>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m
[32m+[m[32m  <!-- Filters -->[m
[32m+[m[32m  <form id="filters" method="GET" action="{{ route('dashboard.treg3.index') }}" x-data>[m
[32m+[m[32m    <div class="grid grid-cols-2 md:grid-cols-4 gap-3 items-end">[m
[32m+[m[32m      <div>[m
[32m+[m[32m        <label class="block text-sm font-medium mb-1">Year</label>[m
[32m+[m[32m        <input type="number" name="year" value="{{ $year }}" min="2000" max="2100"[m
[32m+[m[32m               class="w-full rounded-lg border px-3 py-2"/>[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <div>[m
[32m+[m[32m        <label class="block text-sm font-medium mb-1">Month (1â€“12)</label>[m
[32m+[m[32m        <input type="number" name="month" value="{{ $month }}" min="1" max="12"[m
[32m+[m[32m               class="w-full rounded-lg border px-3 py-2"/>[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <div>[m
[32m+[m[32m        <label class="block text-sm font-medium mb-1">Division</label>[m
[32m+[m[32m        <select name="division" class="w-full rounded-lg border px-3 py-2">[m
[32m+[m[32m          <option {{ $division==='All'?'selected':'' }}>All</option>[m
[32m+[m[32m          @foreach($divisions as $div)[m
[32m+[m[32m            <option value="{{ $div }}" {{ $division===$div?'selected':'' }}>{{ $div }}</option>[m
[32m+[m[32m          @endforeach[m
[32m+[m[32m        </select>[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <div>[m
[32m+[m[32m        <label class="block text-sm font-medium mb-1">Source</label>[m
[32m+[m[32m        <select name="source" class="w-full rounded-lg border px-3 py-2">[m
[32m+[m[32m          <option value="reguler" {{ $source==='reguler'?'selected':'' }}>reguler</option>[m
[32m+[m[32m          <option value="ngtma" {{ $source==='ngtma'?'selected':'' }}>ngtma</option>[m
[32m+[m[32m        </select>[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <div class="md:col-span-4">[m
[32m+[m[32m        <button class="rounded-lg bg-black text-white px-4 py-2">Apply</button>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </form>[m
[32m+[m
[32m+[m[32m  <!-- KPI Cards -->[m
[32m+[m[32m  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">[m
[32m+[m[32m    @foreach(($division==='All' ? $divisions : [$division]) as $div)[m
[32m+[m[32m      @php $k = $kpis[$div]; @endphp[m
[32m+[m[32m      <div class="rounded-2xl border p-4">[m
[32m+[m[32m        <div class="flex items-center justify-between mb-2">[m
[32m+[m[32m          <div class="text-sm text-gray-500">{{ $div }}</div>[m
[32m+[m[32m          <x-lucide-trending-up class="w-4 h-4" />[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div class="text-2xl font-semibold">[m
[32m+[m[32m          {{ number_format($k['current']/1_000_000_000, 2) }} <span class="text-sm font-normal text-gray-500">B</span>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div class="mt-1 text-sm text-gray-600">[m
[32m+[m[32m          YTD: {{ number_format($k['sumToDate']/1_000_000_000, 2) }} B[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div class="mt-1 text-sm {{ $k['growthPct']>=0?'text-green-600':'text-red-600' }}">[m
[32m+[m[32m          {{ $k['growthPct']>=0?'+':'' }}{{ number_format($k['growthPct'], 2) }}%[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    @endforeach[m
[32m+[m[32m  </div>[m
[32m+[m
[32m+[m[32m  <!-- SVG Chart (simple, legible; values are already in billions) -->[m
[32m+[m[32m  @php[m
[32m+[m[32m    $w = 900; $h = 320; $padL=60; $padR=20; $padT=20; $padB=40;[m
[32m+[m[32m    $plotW = $w - $padL - $padR; $plotH = $h - $padT - $padB;[m
[32m+[m[32m    $maxY = max([m
[32m+[m[32m      max($chart['dgs']), max($chart['dps']), max($chart['dss']),[m
[32m+[m[32m      1 // avoid div by zero[m
[32m+[m[32m    );[m
[32m+[m[32m    $x = function($i) use($plotW,$padL){ return $padL + $i * ($plotW/11); };[m
[32m+[m[32m    $y = function($v) use($plotH,$padT,$maxY){ return $padT + ($plotH * (1 - ($v/($maxY ?: 1)))); };[m
[32m+[m[32m    $seriesDraw = function($arr) use($x,$y){[m
[32m+[m[32m        $pts = [];[m
[32m+[m[32m        foreach($arr as $i=>$v){ $pts[] = $x($i).','. $y($v); }[m
[32m+[m[32m        return implode(' ', $pts);[m
[32m+[m[32m    };[m
[32m+[m[32m  @endphp[m
[32m+[m
[32m+[m[32m  <div class="rounded-2xl border p-4 overflow-x-auto">[m
[32m+[m[32m    <svg viewBox="0 0 {{ $w }} {{ $h }}" class="w-full h-auto">[m
[32m+[m[32m      <!-- Axes -->[m
[32m+[m[32m      <line x1="{{ $padL }}" y1="{{ $padT }}" x2="{{ $padL }}" y2="{{ $h-$padB }}" stroke="#e5e7eb"/>[m
[32m+[m[32m      <line x1="{{ $padL }}" y1="{{ $h-$padB }}" x2="{{ $w-$padR }}" y2="{{ $h-$padB }}" stroke="#e5e7eb"/>[m
[32m+[m
[32m+[m[32m      <!-- Y labels (0, 25%, 50%, 75%, 100%) -->[m
[32m+[m[32m      @for($i=0;$i<=4;$i++)[m
[32m+[m[32m        @php $val = $maxY * $i/4; @endphp[m
[32m+[m[32m        <text x="{{ $padL-8 }}" y="{{ $y($val)+4 }}" text-anchor="end" font-size="11" fill="#6b7280">[m
[32m+[m[32m          {{ number_format($val, 2) }} B[m
[32m+[m[32m        </text>[m
[32m+[m[32m        <line x1="{{ $padL }}" y1="{{ $y($val) }}" x2="{{ $w-$padR }}" y2="{{ $y($val) }}" stroke="#f3f4f6"/>[m
[32m+[m[32m      @endfor[m
[32m+[m
[32m+[m[32m      <!-- X labels -->[m
[32m+[m[32m      @foreach($chart['months'] as $i=>$m)[m
[32m+[m[32m        <text x="{{ $x($i) }}" y="{{ $h-$padB+16 }}" text-anchor="middle" font-size="11" fill="#6b7280">[m
[32m+[m[32m          {{ \Carbon\Carbon::create()->month($m)->shortMonthName }}[m
[32m+[m[32m        </text>[m
[32m+[m[32m      @endforeach[m
[32m+[m
[32m+[m[32m      <!-- Lines (no explicit colors per your constraint: default stroke) -->[m
[32m+[m[32m      <polyline points="{{ $seriesDraw($chart['dgs']) }}" fill="none" stroke-width="2"/>[m
[32m+[m[32m      <polyline points="{{ $seriesDraw($chart['dps']) }}" fill="none" stroke-width="2"/>[m
[32m+[m[32m      <polyline points="{{ $seriesDraw($chart['dss']) }}" fill="none" stroke-width="2"/>[m
[32m+[m
[32m+[m[32m      <!-- Legend -->[m
[32m+[m[32m      <g transform="translate({{ $padL }}, {{ $padT }})">[m
[32m+[m[32m        <rect width="130" height="54" fill="white" stroke="#e5e7eb" rx="8"/>[m
[32m+[m[32m        <text x="10" y="16" font-size="12" fill="#111827">Legend</text>[m
[32m+[m[32m        <text x="10" y="34" font-size="11" fill="#374151">DGS / DPS / DSS</text>[m
[32m+[m[32m        <text x="10" y="50" font-size="11" fill="#6b7280">(Billions)</text>[m
[32m+[m[32m      </g>[m
[32m+[m[32m    </svg>[m
[32m+[m[32m  </div>[m
[32m+[m
[32m+[m[32m  <!-- Placeholders for other blocks -->[m
[32m+[m[32m  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">[m
[32m+[m[32m    <div class="rounded-2xl border p-4 text-sm text-gray-500">Revenue Overview (placeholder)</div>[m
[32m+[m[32m    <div class="rounded-2xl border p-4 text-sm text-gray-500">Witel Performance (placeholder)</div>[m
[32m+[m[32m    <div class="rounded-2xl border p-4 text-sm text-gray-500">Division Overview (placeholder)</div>[m
[32m+[m[32m    <div class="rounded-2xl border p-4 text-sm text-gray-500">Top Customers (placeholder)</div>[m
[32m+[m[32m    <div class="rounded-2xl border p-4 text-sm text-gray-500">CC Performance (placeholder)</div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</div>[m
[32m+[m[32m@endsection[m
[1mdiff --git a/resources/views/cc_witel/cc-witel-performance.blade.php b/resources/views/cc_witel/cc-witel-performance.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..20efc3d[m
[1m--- /dev/null[m
[1m+++ b/resources/views/cc_witel/cc-witel-performance.blade.php[m
[36m@@ -0,0 +1,55 @@[m
[32m+[m[32m@extends('layouts.cc-witel-performance-layout')[m
[32m+[m
[32m+[m[32m@section('styles')[m
[32m+[m[32m    {{-- <link rel="stylesheet" href="{{ asset('css/inertia.css') }}"> --}}[m
[32m+[m[32m    {{-- NOTE: change cards ui components to match with the react inertia ones in other repo --}}[m
[32m+[m[32m    <link rel="stylesheet" href="{{ asset('css/ccwitel.css') }}">[m
[32m+[m[32m@endsection[m
[32m+[m
[32m+[m[32m@section('content')[m
[32m+[m[32m  <div className="mx-auto px-16 py-20 space-y-8">[m
[32m+[m[32m      <div class="header-block box-shadow">[m
[32m+[m[32m          <div class="header-content">[m
[32m+[m[32m              {{-- Left side with title and subtitle --}}[m
[32m+[m[32m              <div class="text-content">[m
[32m+[m[32m                  <h1 class="header-title">Dashboard Performansi CC & Witel</h1>[m
[32m+[m[32m                  <p class="header-subtitle">Monitoring dan Analisis Performa Revenue CC dan Witel</p>[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              {{-- Right side with the button --}}[m
[32m+[m[32m              <div class="header-actions">[m
[32m+[m[32m                  <button class="export-btn">[m
[32m+[m[32m                      {{-- Make sure you have Font Awesome included in your project for this icon to appear --}}[m
[32m+[m[32m                      <i class="fas fa-download"></i>[m
[32m+[m[32m                      <span>Export Data</span>[m
[32m+[m[32m                  </button>[m
[32m+[m[32m              </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <div id="trend-revenue" class="ccw-component">[m
[32m+[m[32m          {{-- TODO: add YTD overview cards for trend revenue --}}[m
[32m+[m[32m          @include('cc_witel.partials.trend-revenue-ccw')[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <div id="witel-performance" class="ccw-component">[m
[32m+[m[32m          @include('cc_witel.partials.witel-performance')[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <div class="ccw-component">[m
[32m+[m[32m          {{-- @include('cc_witel.partials.division-overview', ['_placeholder' => true]) --}}[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <div class="ccw-component">[m
[32m+[m[32m          {{-- @include('cc_witel.partials.top-customers', ['_placeholder' => true]) --}}[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <div class="ccw-component">[m
[32m+[m[32m          {{-- @include('cc_witel.partials.cc-performance', ['_placeholder' => true]) --}}[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      {{-- NOTE: this one is probably not needed --}}[m
[32m+[m[32m      {{-- @include('cc_witel.partials.revenue-overview', ['_placeholder' => true]) --}}[m
[32m+[m
[32m+[m[32m  </div>[m
[32m+[m[32m@endsection[m
[1mdiff --git a/resources/views/cc_witel/partials/trend-revenue-ccw.blade.php b/resources/views/cc_witel/partials/trend-revenue-ccw.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..ced5135[m
[1m--- /dev/null[m
[1m+++ b/resources/views/cc_witel/partials/trend-revenue-ccw.blade.php[m
[36m@@ -0,0 +1,465 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m
[32m+[m[32m{{-- TODO: Add overview cards of YTD revenue across all divisions --}}[m
[32m+[m
[32m+[m[32m<html lang="en">[m
[32m+[m[32m<head>[m
[32m+[m[32m    <meta charset="UTF-8">[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0">[m
[32m+[m[32m    <title>Revenue Trend</title>[m
[32m+[m
[32m+[m[32m    {{-- Font Awesome --}}[m
[32m+[m[32m    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />[m
[32m+[m
[32m+[m[32m    {{-- Chart.js --}}[m
[32m+[m[32m    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>[m
[32m+[m
[32m+[m[32m    <link rel="stylesheet" href="{{ asset('css/ccwitel.css') }}">[m
[32m+[m[32m</head>[m
[32m+[m[32m<body class="bg-gray-100 p-8">[m
[32m+[m[32m    <div class="trend-revenue-card">[m
[32m+[m[32m        <div class="trend-card-header">[m
[32m+[m[32m            <div class="header-main-content">[m
[32m+[m[32m                <div class="header-title-section">[m
[32m+[m[32m                    <div class="header-icon-wrapper">[m
[32m+[m[32m                        <i class="fas fa-chart-bar text-white text-2xl"></i>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                    <div>[m
[32m+[m[32m                        <h2 class="header-title">[m
[32m+[m[32m                            Revenue Trend[m
[32m+[m[32m                            <i class="fas fa-chart-line text-green-600"></i>[m
[32m+[m[32m                        </h2>[m
[32m+[m[32m                        <p id="header-subtitle" class="header-subtitle">[m
[32m+[m[32m                            Monthly revenue performance[m
[32m+[m[32m                        </p>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div class="header-date-range">[m
[32m+[m[32m                    <i class="fas fa-calendar-alt text-gray-500"></i>[m
[32m+[m[32m                    <span id="header-date-range"></span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <div class="filters-form">[m
[32m+[m[32m                {{-- Time Range Selector --}}[m
[32m+[m[32m                <div>[m
[32m+[m[32m                    <label for="time_range">Range:</label>[m
[32m+[m[32m                    <select id="time_range">[m
[32m+[m[32m                        <option value="ytd">YTD</option>[m
[32m+[m[32m                        <option value="n_year">N Year</option>[m
[32m+[m[32m                    </select>[m
[32m+[m[32m                </div>[m
[32m+[m
[32m+[m[32m                {{-- N-Year Stepper --}}[m
[32m+[m[32m                <div id="n-year-controls" class="n-year-stepper" style="display: none;">[m
[32m+[m[32m                    <button type="button" id="n-year-decrement">-</button>[m
[32m+[m[32m                    <span id="n-year-label">1 Year</span>[m
[32m+[m[32m                    <button type="button" id="n-year-increment">+</button>[m
[32m+[m[32m                </div>[m
[32m+[m
[32m+[m[32m                {{-- Start Month Selector --}}[m
[32m+[m[32m                <div id="start-month-controls" style="display: none;">[m
[32m+[m[32m                    <label for="start_month">Start Month:</label>[m
[32m+[m[32m                    <select id="start_month">[m
[32m+[m[32m                        @foreach ($months as $date)[m
[32m+[m[32m                            <option value="{{ $date->month }}">{{ $date->format('F') }}</option>[m
[32m+[m[32m                        @endforeach[m
[32m+[m[32m                    </select>[m
[32m+[m[32m                </div>[m
[32m+[m
[32m+[m[32m                {{-- Division Filter --}}[m
[32m+[m[32m                <div>[m
[32m+[m[32m                    <label for="division">Division:</label>[m
[32m+[m[32m                    <select id="division">[m
[32m+[m[32m                        <option value="All">All Division</option>[m
[32m+[m[32m                        <option value="DPS">DPS</option>[m
[32m+[m[32m                        <option value="DSS">DSS</option>[m
[32m+[m[32m                        <option value="DGS">DGS</option>[m
[32m+[m[32m                    </select>[m
[32m+[m[32m                </div>[m
[32m+[m
[32m+[m[32m                {{-- Source Filter --}}[m
[32m+[m[32m                <div>[m
[32m+[m[32m                    <label for="source">Source:</label>[m
[32m+[m[32m                    <select id="source">[m
[32m+[m[32m                        <option value="reguler">REGULER</option>[m
[32m+[m[32m                        <option value="ngtma">NGTMA</option>[m
[32m+[m[32m                    </select>[m
[32m+[m[32m                </div>[m
[32m+[m
[32m+[m[32m                {{-- View Filter --}}[m
[32m+[m[32m                <div>[m
[32m+[m[32m                    <label for="view_mode">View:</label>[m
[32m+[m[32m                    <select id="view_mode">[m
[32m+[m[32m                        <option value="revenue_and_achievement">Revenue & Achievement</option>[m
[32m+[m[32m                        <option value="revenue_only">Revenue Only</option>[m
[32m+[m[32m                        <option value="achievement_only">Achievement Only</option>[m
[32m+[m[32m                    </select>[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <div class="trend-card-content">[m
[32m+[m[32m            <div id="chart-error" class="error-message" style="display: none;"></div>[m
[32m+[m[32m            <div class="chart-container">[m
[32m+[m[32m                <div class="loading-overlay">[m
[32m+[m[32m                    <div class="spinner"></div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m                {{-- NOTE: `style="height: 400px"` should be temporary apparently, but if not put here, everything is messed up :(--}}[m
[32m+[m[32m                <canvas id="revenueChart" style="height: 400px"></canvas>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    @push('scripts')[m
[32m+[m[32m    <script>[m
[32m+[m[32m        document.addEventListener('DOMContentLoaded', function () {[m
[32m+[m[32m            // --- STATE MANAGEMENT & CONSTANTS ---[m
[32m+[m[32m            const state = {[m
[32m+[m[32m                timeRange: 'ytd',[m
[32m+[m[32m                nYears: 1,[m
[32m+[m[32m                startMonth: new Date().getMonth() + 1,[m
[32m+[m[32m                division: 'All',[m
[32m+[m[32m                source: 'reguler',[m
[32m+[m[32m                viewMode: 'revenue_and_achievement',[m
[32m+[m[32m                isLoading: true,[m
[32m+[m[32m            };[m
[32m+[m[32m            const dataCache = {}; // Cache to store fetched revenue data by YYYY-MM[m
[32m+[m[32m            const MIN_YEAR = 2020;[m
[32m+[m[32m            let revenueChart = null; // To hold the Chart.js instance[m
[32m+[m
[32m+[m[32m            const dom = {[m
[32m+[m[32m                timeRange: document.getElementById('time_range'),[m
[32m+[m[32m                nYearControls: document.getElementById('n-year-controls'),[m
[32m+[m[32m                nYearLabel: document.getElementById('n-year-label'),[m
[32m+[m[32m                nYearDecrement: document.getElementById('n-year-decrement'),[m
[32m+[m[32m                nYearIncrement: document.getElementById('n-year-increment'),[m
[32m+[m[32m                startMonthControls: document.getElementById('start-month-controls'),[m
[32m+[m[32m                startMonth: document.getElementById('start_month'),[m
[32m+[m[32m                division: document.getElementById('division'),[m
[32m+[m[32m                source: document.getElementById('source'),[m
[32m+[m[32m                viewMode: document.getElementById('view_mode'),[m
[32m+[m[32m                chartError: document.getElementById('chart-error'),[m
[32m+[m[32m                loadingOverlay: document.querySelector('.loading-overlay'),[m
[32m+[m[32m                chartCanvas: document.getElementById('revenueChart'),[m
[32m+[m[32m                headerSubtitle: document.getElementById('header-subtitle'),[m
[32m+[m[32m                headerDateRange: document.getElementById('header-date-range'),[m
[32m+[m[32m                chartCanvas: document.getElementById('revenueChart'),[m
[32m+[m[32m            };[m
[32m+[m
[32m+[m[32m            // --- DATA FETCHING & CACHING ---[m
[32m+[m[32m            async function fetchData(startDate, endDate) {[m
[32m+[m[32m                const source = state.source;[m
[32m+[m[32m                const apiUrl = `/dashboard/trend-data?source=${source}&start_date=${startDate.toISOString().split('T')[0]}&end_date=${endDate.toISOString().split('T')[0]}`;[m
[32m+[m
[32m+[m[32m                try {[m
[32m+[m[32m                    const response = await fetch(apiUrl);[m
[32m+[m[32m                    if (!response.ok) {[m
[32m+[m[32m                        throw new Error(`Network response was not ok (${response.status})`);[m
[32m+[m[32m                    }[m
[32m+[m[32m                    const data = await response.json();[m
[32m+[m
[32m+[m[32m                    // Process and store fetched data in the cache[m
[32m+[m[32m                    data.forEach(row => {[m
[32m+[m[32m                        const key = `${row.tahun}-${row.bulan}`;[m
[32m+[m[32m                        if (!dataCache[key]) {[m
[32m+[m[32m                            dataCache[key] = {[m
[32m+[m[32m                                dgs: { real: 0, target: 0 },[m
[32m+[m[32m                                dss: { real: 0, target: 0 },[m
[32m+[m[32m                                dps: { real: 0, target: 0 }[m
[32m+[m[32m                            };[m
[32m+[m[32m                        }[m
[32m+[m[32m                        const DIVISOR = 1_000_000_000;[m
[32m+[m[32m                        const real_revenue = (row.real_revenue || 0) / DIVISOR;[m
[32m+[m[32m                        const target_revenue = (row.target_revenue || 0) / DIVISOR;[m
[32m+[m
[32m+[m[32m                        switch (row.divisi_id) {[m
[32m+[m[32m                            case 1: dataCache[key].dgs.real += real_revenue; dataCache[key].dgs.target += target_revenue; break;[m
[32m+[m[32m                            case 2: dataCache[key].dss.real += real_revenue; dataCache[key].dss.target += target_revenue; break;[m
[32m+[m[32m                            case 3: dataCache[key].dps.real += real_revenue; dataCache[key].dps.target += target_revenue; break;[m
[32m+[m[32m                        }[m
[32m+[m[32m                    });[m
[32m+[m
[32m+[m[32m                    return true;[m
[32m+[m
[32m+[m[32m                } catch (error) {[m
[32m+[m[32m                    console.error("Fetch Error:", error);[m
[32m+[m[32m                    dom.chartError.textContent = `Error: Failed to fetch revenue data. ${error.message}`;[m
[32m+[m[32m                    dom.chartError.style.display = 'block';[m
[32m+[m[32m                    return false;[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            // --- CHART RENDERING ---[m
[32m+[m[32m            function renderChart(startDate, endDate) {[m
[32m+[m[32m                const labels = [];[m
[32m+[m[32m                const realData = [], targetData = [], achievementData = [];[m
[32m+[m
[32m+[m[32m                let current = new Date(startDate);[m
[32m+[m[32m                while (current <= endDate) {[m
[32m+[m[32m                    labels.push(current.toLocaleDateString('en-US', { month: 'short', year: '2-digit' }));[m
[32m+[m
[32m+[m[32m                    const key = `${current.getFullYear()}-${current.getMonth() + 1}`;[m
[32m+[m[32m                    const monthData = dataCache[key] || {[m
[32m+[m[32m                        dgs: { real: 0, target: 0 },[m
[32m+[m[32m                        dss: { real: 0, target: 0 },[m
[32m+[m[32m                        dps: { real: 0, target: 0 }[m
[32m+[m[32m                    };[m
[32m+[m
[32m+[m[32m                    let totalReal = 0;[m
[32m+[m[32m                    let totalTarget = 0;[m
[32m+[m
[32m+[m[32m                    // Aggregate data based on Division filter[m
[32m+[m[32m                    if (state.division === 'All' || state.division === 'DPS') {[m
[32m+[m[32m                        totalReal += monthData.dps.real;[m
[32m+[m[32m                        totalTarget += monthData.dps.target;[m
[32m+[m[32m                    }[m
[32m+[m[32m                    if (state.division === 'All' || state.division === 'DSS') {[m
[32m+[m[32m                        totalReal += monthData.dss.real;[m
[32m+[m[32m                        totalTarget += monthData.dss.target;[m
[32m+[m[32m                    }[m
[32m+[m[32m                    if (state.division === 'All' || state.division === 'DGS') {[m
[32m+[m[32m                        totalReal += monthData.dgs.real;[m
[32m+[m[32m                        totalTarget += monthData.dgs.target;[m
[32m+[m[32m                    }[m
[32m+[m
[32m+[m[32m                    realData.push(totalReal.toFixed(2));[m
[32m+[m[32m                    targetData.push(totalTarget.toFixed(2));[m
[32m+[m
[32m+[m[32m                    const achievement = (totalTarget === 0) ? 0 : (totalReal / totalTarget) * 100;[m
[32m+[m[32m                    achievementData.push(achievement.toFixed(2));[m
[32m+[m
[32m+[m[32m                    current.setMonth(current.getMonth() + 1);[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                // Define the datasets based on the viewMode filter[m
[32m+[m[32m                const datasets = [];[m
[32m+[m[32m                const view = state.viewMode;[m
[32m+[m
[32m+[m[32m                if (view === 'revenue_and_achievement' || view === 'revenue_only') {[m
[32m+[m[32m                    datasets.push({[m
[32m+[m[32m                        type: 'bar',[m
[32m+[m[32m                        label: 'Real Revenue',[m
[32m+[m[32m                        data: realData,[m
[32m+[m[32m                        backgroundColor: 'rgba(54, 162, 235, 0.7)', // Blue[m
[32m+[m[32m                        yAxisID: 'yRevenue', // Assign to left axis[m
[32m+[m[32m                        order: 2[m
[32m+[m[32m                    });[m
[32m+[m[32m                    datasets.push({[m
[32m+[m[32m                        type: 'bar',[m
[32m+[m[32m                        label: 'Target Revenue',[m
[32m+[m[32m                        data: targetData,[m
[32m+[m[32m                        backgroundColor: 'rgba(201, 203, 207, 0.7)', // Grey[m
[32m+[m[32m                        yAxisID: 'yRevenue', // Assign to left axis[m
[32m+[m[32m                        order: 2[m
[32m+[m[32m                    });[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                if (view === 'revenue_and_achievement' || view === 'achievement_only') {[m
[32m+[m[32m                    datasets.push({[m
[32m+[m[32m                        type: 'line',[m
[32m+[m[32m                        label: 'Achievement (%)',[m
[32m+[m[32m                        data: achievementData,[m
[32m+[m[32m                        borderColor: 'rgba(255, 99, 132, 1)', // Red[m
[32m+[m[32m                        backgroundColor: 'rgba(255, 99, 132, 0.2)',[m
[32m+[m[32m                        tension: 0.4,[m
[32m+[m[32m                        yAxisID: 'yAchievement', // Assign to right axis[m
[32m+[m[32m                        order: 1[m
[32m+[m[32m                    });[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                const chartOptions = {[m
[32m+[m[32m                    responsive: true,[m
[32m+[m[32m                    maintainAspectRatio: false,[m
[32m+[m[32m                    interaction: { mode: 'index', intersect: false },[m
[32m+[m[32m                    scales: {[m
[32m+[m[32m                        // Left Y-Axis (Revenue)[m
[32m+[m[32m                        yRevenue: {[m
[32m+[m[32m                            type: 'linear',[m
[32m+[m[32m                            display: true,[m
[32m+[m[32m                            position: 'left',[m
[32m+[m[32m                            beginAtZero: true,[m
[32m+[m[32m                            title: { display: true, text: 'Revenue (in Billions)' },[m
[32m+[m[32m                        },[m
[32m+[m[32m                        // Right Y-Axis (Achievement %)[m
[32m+[m[32m                        yAchievement: {[m
[32m+[m[32m                            type: 'linear',[m
[32m+[m[32m                            display: true,[m
[32m+[m[32m                            position: 'right',[m
[32m+[m[32m                            beginAtZero: true,[m
[32m+[m[32m                            title: { display: true, text: 'Achievement (%)' },[m
[32m+[m[32m                            grid: { drawOnChartArea: false },[m
[32m+[m[32m                            ticks: {[m
[32m+[m[32m                                callback: value => `${value}%`[m
[32m+[m[32m                            }[m
[32m+[m[32m                        }[m
[32m+[m[32m                    },[m
[32m+[m[32m                    plugins: {[m
[32m+[m[32m                        legend: {[m
[32m+[m[32m                            position: 'top',[m
[32m+[m[32m                        },[m
[32m+[m[32m                        tooltip: {[m
[32m+[m[32m                            mode: 'index',[m
[32m+[m[32m                            intersect: false,[m
[32m+[m[32m                        },[m
[32m+[m[32m                    },[m
[32m+[m[32m                    interaction: {[m
[32m+[m[32m                        mode: 'index',[m
[32m+[m[32m                        intersect: false,[m
[32m+[m[32m                    }[m
[32m+[m[32m                };[m
[32m+[m
[32m+[m[32m                // Conditionally show/hide axes based on viewMode[m
[32m+[m[32m                if (state.viewMode === 'revenue_only') {[m
[32m+[m[32m                    chartOptions.scales.yAchievement.display = false;[m
[32m+[m[32m                    chartOptions.scales.yRevenue.display = true;[m
[32m+[m[32m                } else if (state.viewMode === 'achievement_only') {[m
[32m+[m[32m                    chartOptions.scales.yAchievement.display = true;[m
[32m+[m[32m                    chartOptions.scales.yRevenue.display = false;[m
[32m+[m[32m                } else { // 'revenue_and_achievement'[m
[32m+[m[32m                    chartOptions.scales.yAchievement.display = true;[m
[32m+[m[32m                    chartOptions.scales.yRevenue.display = true;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                // Create or update the chart[m
[32m+[m[32m                if (revenueChart) {[m
[32m+[m[32m                    revenueChart.data.labels = labels;[m
[32m+[m[32m                    revenueChart.data.datasets = datasets;[m
[32m+[m[32m                    revenueChart.options.scales = chartOptions.scales; // IMPORTANT: Update scales[m
[32m+[m[32m                    revenueChart.update();[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    revenueChart = new Chart(dom.chartCanvas, {[m
[32m+[m[32m                        // Default type is bar, but datasets will override[m
[32m+[m[32m                        type: 'bar',[m
[32m+[m[32m                        data: { labels, datasets },[m
[32m+[m[32m                        options: chartOptions[m
[32m+[m[32m                    });[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            function updateHeader(startDate, endDate) {[m
[32m+[m[32m                // Update the subtitle based on the division and time range[m
[32m+[m[32m                const divisionText = state.division === 'All' ? 'all divisions' : state.division;[m
[32m+[m[32m                const timeFrameText = state.timeRange === 'ytd' ? `(YTD ${new Date().getFullYear()})` : `(Custom Range)`;[m
[32m+[m[32m                dom.headerSubtitle.textContent = `Monthly revenue performance across ${divisionText} ${timeFrameText}`;[m
[32m+[m
[32m+[m[32m                // Update the date range display[m
[32m+[m[32m                const endText = endDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });[m
[32m+[m[32m                let startText;[m
[32m+[m[32m                if (startDate.getFullYear() === endDate.getFullYear()) {[m
[32m+[m[32m                    // If same year, don't repeat the year (e.g., "Jan â€“ Oct 2025")[m
[32m+[m[32m                    startText = startDate.toLocaleDateString('en-US', { month: 'short' });[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    // If different years, show both (e.g., "Oct 2023 â€“ Oct 2025")[m
[32m+[m[32m                    startText = startDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });[m
[32m+[m[32m                }[m
[32m+[m[32m                dom.headerDateRange.textContent = `${startText} â€“ ${endText}`;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            // --- MAIN ORCHESTRATOR FUNCTION ---[m
[32m+[m[32m            async function updateDashboard() {[m
[32m+[m[32m                state.isLoading = true;[m
[32m+[m[32m                dom.loadingOverlay.classList.remove('hidden');[m
[32m+[m[32m                dom.chartError.style.display = 'none';[m
[32m+[m
[32m+[m[32m                const now = new Date();[m
[32m+[m[32m                let startDate, endDate = new Date(now.getFullYear(), now.getMonth() + 1, 0);[m
[32m+[m
[32m+[m[32m                if (state.timeRange === 'ytd') {[m
[32m+[m[32m                    startDate = new Date(now.getFullYear(), 0, 1);[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    const startYear = now.getFullYear() - state.nYears;[m
[32m+[m[32m                    startDate = new Date(startYear, state.startMonth - 1, 1);[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                // Determine which data is missing from cache[m
[32m+[m[32m                let firstMissingDate = null;[m
[32m+[m[32m                let current = new Date(startDate);[m
[32m+[m[32m                while (current <= endDate) {[m
[32m+[m[32m                    const key = `${current.getFullYear()}-${current.getMonth() + 1}`;[m
[32m+[m[32m                    if (!dataCache[key]) {[m
[32m+[m[32m                        firstMissingDate = new Date(current);[m
[32m+[m[32m                        break;[m
[32m+[m[32m                    }[m
[32m+[m[32m                    current.setMonth(current.getMonth() + 1);[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                // Fetch missing data if necessary[m
[32m+[m[32m                if (firstMissingDate) {[m
[32m+[m[32m                    const success = await fetchData(firstMissingDate, endDate);[m
[32m+[m[32m                    if (!success) {[m
[32m+[m[32m                        state.isLoading = false;[m
[32m+[m[32m                        dom.loadingOverlay.classList.add('hidden');[m
[32m+[m[32m                        return;[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                // Render the chart with data from cache[m
[32m+[m[32m                renderChart(startDate, endDate);[m
[32m+[m[32m                updateHeader(startDate, endDate);[m
[32m+[m[32m                state.isLoading = false;[m
[32m+[m[32m                dom.loadingOverlay.classList.add('hidden');[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            // --- EVENT LISTENERS ---[m
[32m+[m[32m            function setupEventListeners() {[m
[32m+[m[32m                dom.timeRange.addEventListener('change', (e) => {[m
[32m+[m[32m                    state.timeRange = e.target.value;[m
[32m+[m[32m                    updateUiVisibility();[m
[32m+[m[32m                    updateDashboard();[m
[32m+[m[32m                });[m
[32m+[m[32m                dom.division.addEventListener('change', (e) => {[m
[32m+[m[32m                    state.division = e.target.value;[m
[32m+[m[32m                    updateDashboard();[m
[32m+[m[32m                });[m
[32m+[m[32m                dom.source.addEventListener('change', (e) => {[m
[32m+[m[32m                    state.source = e.target.value;[m
[32m+[m[32m                    Object.keys(dataCache).forEach(key => delete dataCache[key]); // Clear cache on source change[m
[32m+[m[32m                    updateDashboard();[m
[32m+[m[32m                });[m
[32m+[m[32m                dom.startMonth.addEventListener('change', (e) => {[m
[32m+[m[32m                    state.startMonth = parseInt(e.target.value, 10);[m
[32m+[m[32m                    updateDashboard();[m
[32m+[m[32m                });[m
[32m+[m[32m                dom.nYearDecrement.addEventListener('click', () => {[m
[32m+[m[32m                    if (state.nYears > 1) {[m
[32m+[m[32m                        state.nYears--;[m
[32m+[m[32m                        updateNYearsLabel();[m
[32m+[m[32m                        updateDashboard();[m
[32m+[m[32m                    }[m
[32m+[m[32m                });[m
[32m+[m[32m                dom.nYearIncrement.addEventListener('click', () => {[m
[32m+[m[32m                    const maxNYears = new Date().getFullYear() - MIN_YEAR;[m
[32m+[m[32m                    if (state.nYears < maxNYears) {[m
[32m+[m[32m                        state.nYears++;[m
[32m+[m[32m                        updateNYearsLabel();[m
[32m+[m[32m                        updateDashboard();[m
[32m+[m[32m                    }[m
[32m+[m[32m                });[m
[32m+[m
[32m+[m[32m                dom.viewMode.addEventListener('change', (e) => {[m
[32m+[m[32m                    state.viewMode = e.target.value;[m
[32m+[m[32m                    // Call updateDashboard() which will use cached data.[m
[32m+[m[32m                    updateDashboard();[m
[32m+[m[32m                });[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            // --- UI HELPER FUNCTIONS ---[m
[32m+[m[32m            function updateUiVisibility() {[m
[32m+[m[32m                const showNYear = state.timeRange === 'n_year';[m
[32m+[m[32m                dom.nYearControls.style.display = showNYear ? 'flex' : 'none';[m
[32m+[m[32m                dom.startMonthControls.style.display = showNYear ? 'flex' : 'none';[m
[32m+[m[32m            }[m
[32m+[m[32m            function updateNYearsLabel() {[m
[32m+[m[32m                dom.nYearLabel.textContent = `${state.nYears} Year${state.nYears > 1 ? 's' : ''}`;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            // --- INITIALIZATION ---[m
[32m+[m[32m            dom.startMonth.value = state.startMonth;[m
[32m+[m[32m            setupEventListeners();[m
[32m+[m[32m            updateDashboard(); // Initial data load (YTD)[m
[32m+[m[32m        });[m
[32m+[m[32m    </script>[m
[32m+[m[32m    @endpush[m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
[1mdiff --git a/resources/views/cc_witel/partials/witel-performance.blade.php b/resources/views/cc_witel/partials/witel-performance.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..82af022[m
[1m--- /dev/null[m
[1m+++ b/resources/views/cc_witel/partials/witel-performance.blade.php[m
[36m@@ -0,0 +1,388 @@[m
[32m+[m[32m<!DOCTYPE html>[m
[32m+[m
[32m+[m[32m<html lang="en">[m
[32m+[m[32m<head>[m
[32m+[m[32m    <meta charset="UTF-8">[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0">[m
[32m+[m[32m    <title>Witel Achievement</title>[m
[32m+[m
[32m+[m[32m    {{-- Include Font Awesome --}}[m
[32m+[m[32m    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />[m
[32m+[m
[32m+[m[32m    {{-- Your main CSS file (or add styles here) --}}[m
[32m+[m[32m    <link rel="stylesheet" href="{{ asset('css/ccwitel.css') }}">[m
[32m+[m[32m</head>[m
[32m+[m
[32m+[m[32m@php[m
[32m+[m[32m    $currentYear = date('Y');[m
[32m+[m[32m    $currentMonth = date('n');[m
[32m+[m[32m@endphp[m
[32m+[m
[32m+[m[32m<body class="bg-gray-100 p-8">[m
[32m+[m[32m    {{-- TODO: --}}[m
[32m+[m[32m    {{-- for the filters make three modes: YTD, Annual, and Monthly, for YTD -> itself + source, for Monthly -> itself + year + month + source, for Annual -> itself + year + source --}}[m
[32m+[m[32m    {{-- on each witel list card, add --in respect to their mode-- YTD Revenue, YTD Target, achievement percentage is als relative to YTD target --}}[m
[32m+[m
[32m+[m[32m    <div class="witel-performance-layout">[m
[32m+[m[32m        {{-- Witel Leaderboard --}}[m
[32m+[m[32m        <div class="witel-list-pane witel-layout-card shadow-sm border-gray-200">[m
[32m+[m[32m            {{-- The card header now contains BOTH title and filters --}}[m
[32m+[m[32m            <div class="witel-layout-card-header pb-4">[m
[32m+[m[32m                <div class="header-top-row">[m
[32m+[m[32m                    <div class="header-title-group flex items-center justify-between">[m
[32m+[m[32m                        <h2 id="header-title">[m
[32m+[m[32m                            <i class="fas fa-building" id="witel-title-icon"></i>[m
[32m+[m[32m                            Witel Achievement â€“ {{ $currentYear }}[m
[32m+[m[32m                        </h2>[m
[32m+[m[32m                    </div>[m
[32m+[m
[32m+[m[32m                    {{-- Horizontal Filters --}}[m
[32m+[m[32m                    <div id="witel-filters">[m
[32m+[m[32m                        <div class="flex items-center gap-2">[m
[32m+[m[32m                            <label for="witel-mode" class="text-sm">Range:</label>[m
[32m+[m[32m                            <select id="witel-mode" class="filter-input">[m
[32m+[m[32m                                <option value="ytd">YTD</option>[m
[32m+[m[32m                                <option value="monthly">Monthly</option>[m
[32m+[m[32m                                <option value="annual">Annual</option>[m
[32m+[m[32m                            </select>[m
[32m+[m[32m                        </div>[m
[32m+[m[32m                        <div id="witel-year-filter" class="flex items-center gap-2">[m
[32m+[m[32m                            <label for="witel-year" class="text-sm">Year:</label>[m
[32m+[m[32m                            <select id="witel-year" class="filter-input">[m
[32m+[m[32m                                @for ($y = $currentYear - 3; $y <= $currentYear; $y++)[m
[32m+[m[32m                                <option value="{{ $y }}" {{ $y == $currentYear ? 'selected' : '' }}>{{ $y }}</option>[m
[32m+[m[32m                                @endfor[m
[32m+[m[32m                            </select>[m
[32m+[m[32m                        </div>[m
[32m+[m[32m                        <div id="witel-month-filter" class="flex items-center gap-2">[m
[32m+[m[32m                            <label for="witel-month" class="text-sm">Month:</label>[m
[32m+[m[32m                            <select id="witel-month" class="filter-input">[m
[32m+[m[32m                                @foreach (['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Des'] as $i => $m)[m
[32m+[m[32m                                <option value="{{ $i + 1 }}" {{ ($i + 1) == $currentMonth ? 'selected' : '' }}>{{ $m }}</option>[m
[32m+[m[32m                                @endforeach[m
[32m+[m[32m                            </select>[m
[32m+[m[32m                        </div>[m
[32m+[m[32m                        <div class="flex items-center gap-2">[m
[32m+[m[32m                            <label for="witel-source" class="text-sm">Source:</label>[m
[32m+[m[32m                            <select id="witel-source" class="filter-input w-32">[m
[32m+[m[32m                                <option value="reguler">REGULER</option>[m
[32m+[m[32m                                <option value="ngtma">NGTMA</option>[m
[32m+[m[32m                            </select>[m
[32m+[m[32m                        </div>[m
[32m+[m[32m                    </div>[m
[32m+[m
[32m+[m[32m                    <div class="header-bottom-row">[m
[32m+[m[32m                        <div id="witel-total-revenue" class="mt-1 text-sm text-gray-600">[m
[32m+[m[32m                            Total Revenue: <span class="font-semibold text-gray-900">Loading...</span>[m
[32m+[m[32m                        </div>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            {{-- The card content is now the scrollable list container --}}[m
[32m+[m[32m            <div class="witel-layout-card-content">[m
[32m+[m[32m                <div id="witel-loading" class="text-sm text-gray-600">Loading...</div>[m
[32m+[m[32m                <div id="witel-error" class="text-sm text-red-600" style="display: none;"></div>[m
[32m+[m[32m                <div id="witel-list-container" class="space-y-4">[m
[32m+[m[32m                    {{-- Witel cards will be injected here --}}[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        {{-- Customer Detail --}}[m
[32m+[m[32m        <div class="witel-detail-pane">[m
[32m+[m[32m            <div class="witel-layout-card shadow-sm border-gray-200">[m
[32m+[m[32m                <div class="witel-layout-card-header pb-4">[m
[32m+[m[32m                    <h4 id="witel-detail-title" class="text-lg font-bold text-gray-900">[m
[32m+[m[32m                        Customer List[m
[32m+[m[32m                    </h4>[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div class="witel-customer-layout-card-content">[m
[32m+[m[32m                    <div id="witel-detail-empty" class="text-sm text-gray-500">[m
[32m+[m[32m                        Pilih Witel dari daftar di sebelah kiri untuk melihat detail.[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                    <div id="witel-detail-loading" class="text-sm text-gray-500" style="display: none;">[m
[32m+[m[32m                        {{-- This will never be seen, a data is instant --}}[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                    <div id="witel-detail-content" style="display: none;">[m
[32m+[m[32m                        <div class="customer-list-header">[m
[32m+[m[32m                            <span class="customer-list-header-label customer-list-header-left">Nama CC</span>[m
[32m+[m[32m                            <div class="customer-list-header-right">[m
[32m+[m[32m                                <span class="customer-list-header-label">Share</span>[m
[32m+[m[32m                                <span class="customer-list-header-label">Nominal</span>[m
[32m+[m[32m                            </div>[m
[32m+[m[32m                        </div>[m
[32m+[m[32m                        <ol id="witel-customer-list" class="space-y-2" style="padding-left: 0px; margin-top: 0px; margin-bottom: 0px;"></ol>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    {{-- This is a 'template' for a single Witel row. JavaScript will clone this, fill in the data, and append it to the list. --}}[m
[32m+[m[32m    <template id="witel-row-template">[m
[32m+[m[32m        <div class="witel-card">[m
[32m+[m[32m            {{-- New wrapper for all other content --}}[m
[32m+[m[32m            <div class="witel-card-content">[m
[32m+[m[32m                <div class="flex justify-between items-center mb-3">[m
[32m+[m[32m                    <div class="witel-card-name-group">[m
[32m+[m[32m                        <div data-el="status-dot" class="witel-status-dot"></div>[m
[32m+[m[32m                        <span data-el="witel-name" class="font-semibold text-gray-900"></span>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                    <div class="text-right">[m
[32m+[m[32m                        <div data-el="revenue"></div>[m
[32m+[m[32m                        <div class="text-xs text-gray-600">[m
[32m+[m[32m                            Target: Rp<span data-el="target" class="font-medium"></span>[m
[32m+[m[32m                        </div>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                </div>[m
[32m+[m
[32m+[m[32m                <div class="progress-bar-container">[m
[32m+[m[32m                    <div class="progress-bar-bg">[m
[32m+[m[32m                        <div data-el="progress-bar" class="progress-bar" style="width: 0%;"></div>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                    <span data-el="badge" class="badge text-xs"></span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m    </template>[m
[32m+[m
[32m+[m[32m    <template id="customer-row-template">[m
[32m+[m[32m        <li class="customer-list-row">[m
[32m+[m[32m            <div class="customer-info">[m
[32m+[m[32m                <div data-el="rank-badge"></div>[m
[32m+[m[32m                <span data-el="customer-name" class="truncate"></span>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div class="customer-stats">[m
[32m+[m[32m                <span data-el="percentage"></span>[m
[32m+[m[32m                <span data-el="revenue" class="tabular-nums"></span>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </li>[m
[32m+[m[32m    </template>[m
[32m+[m
[32m+[m[32m    {{-- FIX: Change JavaScript to the new one because this one is incompatible --}}[m
[32m+[m
[32m+[m[32m    @push('scripts')[m
[32m+[m[32m    <script>[m
[32m+[m[32m    document.addEventListener('DOMContentLoaded', function () {[m
[32m+[m[32m        let witelDataCache = [];[m
[32m+[m
[32m+[m[32m        // --- STATE & DOM ---[m
[32m+[m[32m        const state = {[m
[32m+[m[32m            year: document.getElementById('witel-year').value,[m
[32m+[m[32m            month: document.getElementById('witel-month').value,[m
[32m+[m[32m            source: document.getElementById('witel-source').value,[m
[32m+[m[32m            activeWitelId: null,[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        const dom = {[m
[32m+[m[32m            // Left Pane[m
[32m+[m[32m            title: document.getElementById('header-title'),[m
[32m+[m[32m            totalRevenue: document.getElementById('witel-total-revenue'),[m
[32m+[m[32m            loading: document.getElementById('witel-loading'),[m
[32m+[m[32m            error: document.getElementById('witel-error'),[m
[32m+[m[32m            listContainer: document.getElementById('witel-list-container'),[m
[32m+[m[32m            filters: document.querySelectorAll('#witel-filters .filter-input'),[m
[32m+[m[32m            witelTemplate: document.getElementById('witel-row-template'),[m
[32m+[m
[32m+[m[32m            // Right Pane[m
[32m+[m[32m            detailTitle: document.getElementById('witel-detail-title'),[m
[32m+[m[32m            detailEmpty: document.getElementById('witel-detail-empty'),[m
[32m+[m[32m            detailContent: document.getElementById('witel-detail-content'),[m
[32m+[m[32m            customerList: document.getElementById('witel-customer-list'),[m
[32m+[m[32m            customerTemplate: document.getElementById('customer-row-template'),[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        // --- HELPER FUNCTIONS (formatIDR, getBadgeStyle, getStatusDot) ---[m
[32m+[m[32m        const formatIDRCompact = (num) => {[m
[32m+[m[32m            if (num === null || num === undefined) return "â€”";[m
[32m+[m[32m            const n = Number(num);[m
[32m+[m[32m            const absN = Math.abs(n);[m
[32m+[m[32m            const sign = n < 0 ? "-" : "";[m
[32m+[m[32m            if (absN >= 1_000_000_000_000) return `${sign}${(n / 1_000_000_000_000).toFixed(1)} Triliun`;[m
[32m+[m[32m            if (absN >= 1_000_000_000) return `${sign}${(n / 1_000_000_000).toFixed(1)} Milyar`;[m
[32m+[m[32m            if (absN >= 1_000_000) return `${sign}${(n / 1_000_000).toFixed(1)} Juta`;[m
[32m+[m[32m            if (absN >= 1000) return `${sign}${(n / 1000).toFixed(1)} Ribu`;[m
[32m+[m[32m            return `${sign}${n.toFixed(0)}`;[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        // Determines badge style from achievement[m
[32m+[m[32m        const getBadgeStyle = (ach) => {[m
[32m+[m[32m            if (ach == null) return { class: 'badge-secondary', text: 'â€”' };[m
[32m+[m[32m            const text = `${ach.toFixed(1)}%`;[m
[32m+[m[32m            if (ach >= 100) return { class: 'badge-success', text };[m
[32m+[m[32m            if (ach >= 80) return { class: 'badge-warning', text };[m
[32m+[m[32m            return { class: 'badge-danger', text };[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        // Determines status dot color[m
[32m+[m[32m        const getStatusDot = (ach) => {[m
[32m+[m[32m            if (ach == null) return 'bg-gray-400';[m
[32m+[m[32m            if (ach >= 100) return 'bg-green-600';[m
[32m+[m[32m            if (ach >= 80) return 'bg-amber-600';[m
[32m+[m[32m            return 'bg-red-600';[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        function renderCustomerList(witelId, witelName) {[m
[32m+[m[32m            // Find the data in our cache[m
[32m+[m[32m            const witel = witelDataCache.find(w => w.id == witelId);[m
[32m+[m[32m            if (!witel) return;[m
[32m+[m
[32m+[m[32m            const customers = witel.customers;[m
[32m+[m
[32m+[m[32m            // Update UI[m
[32m+[m[32m            dom.detailTitle.textContent = `Customers â€” ${witelName}`;[m
[32m+[m[32m            dom.customerList.innerHTML = ''; // Clear old list[m
[32m+[m
[32m+[m[32m            if (customers.length === 0) {[m
[32m+[m[32m                dom.detailEmpty.textContent = 'Tidak ada data customer untuk Witel ini pada bulan/tahun yang dipilih.';[m
[32m+[m[32m                dom.detailEmpty.style.display = 'block';[m
[32m+[m[32m                dom.detailContent.style.display = 'none';[m
[32m+[m[32m            } else {[m
[32m+[m[32m                const total = customers.reduce((sum, row) => sum + (Number(row.total_revenue) || 0), 0);[m
[32m+[m[32m                const rankClasses = ['rank-gold', 'rank-silver', 'rank-bronze'];[m
[32m+[m
[32m+[m[32m                customers.forEach((row, i) => {[m
[32m+[m[32m                    const li = dom.customerTemplate.content.cloneNode(true);[m
[32m+[m[32m                    const val = Number(row.total_revenue) || 0;[m
[32m+[m[32m                    const pct = total > 0 ? (val / total) * 100 : 0;[m
[32m+[m[32m                    const rank = i + 1;[m
[32m+[m[32m                    const rankClass = rankClasses[i] || 'rank-default';[m
[32m+[m
[32m+[m[32m                    const rankBadge = li.querySelector('[data-el="rank-badge"]');[m
[32m+[m[32m                    rankBadge.classList.add(rankClass);[m
[32m+[m[32m                    rankBadge.textContent = rank;[m
[32m+[m
[32m+[m[32m                    li.querySelector('[data-el="customer-name"]').textContent = row.nama_cc || 'N/A';[m
[32m+[m[32m                    li.querySelector('[data-el="percentage"]').textContent = `${pct.toFixed(1)}%`;[m
[32m+[m[32m                    li.querySelector('[data-el="revenue"]').textContent = `Rp${formatIDRCompact(val)}`;[m
[32m+[m
[32m+[m[32m                    dom.customerList.appendChild(li);[m
[32m+[m[32m                });[m
[32m+[m
[32m+[m[32m                dom.detailEmpty.style.display = 'none';[m
[32m+[m[32m                dom.detailContent.style.display = 'block';[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        function renderLeaderboard() {[m
[32m+[m[32m            dom.listContainer.innerHTML = ''; // Clear old list[m
[32m+[m
[32m+[m[32m            let totalRevenue = 0;[m
[32m+[m[32m            witelDataCache.forEach(witel => {[m
[32m+[m[32m                totalRevenue += witel.revenueM;[m
[32m+[m[32m                const card = dom.witelTemplate.content.cloneNode(true).firstElementChild;[m
[32m+[m
[32m+[m[32m                const ach = witel.achievement;[m
[32m+[m[32m                const badge = getBadgeStyle(ach);[m
[32m+[m[32m                const dot = getStatusDot(ach);[m
[32m+[m[32m                const progress = ach == null ? 0 : Math.min(ach, 100);[m
[32m+[m
[32m+[m[32m                // Populate Witel Summary[m
[32m+[m[32m                card.querySelector('[data-el="status-dot"]').classList.add(dot);[m
[32m+[m[32m                card.querySelector('[data-el="witel-name"]').textContent = witel.name;[m
[32m+[m[32m                card.querySelector('[data-el="badge"]').textContent = badge.text;[m
[32m+[m[32m                card.querySelector('[data-el="badge"]').classList.add(badge.class);[m
[32m+[m[32m                card.querySelector('[data-el="revenue"]').textContent = `Rp${formatIDRCompact(witel.revenueM)}`;[m
[32m+[m[32m                card.querySelector('[data-el="target"]').textContent = formatIDRCompact(witel.targetM);[m
[32m+[m
[32m+[m[32m                const progressBar = card.querySelector('[data-el="progress-bar"]');[m
[32m+[m[32m                progressBar.style.width = `${progress}%`;[m
[32m+[m[32m                progressBar.classList.add(dot);[m
[32m+[m
[32m+[m[32m                // Add click listener data[m
[32m+[m[32m                card.dataset.witelId = witel.id;[m
[32m+[m[32m                card.dataset.witelName = witel.name;[m
[32m+[m
[32m+[m[32m                dom.listContainer.appendChild(card);[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            const monthName = document.querySelector(`#witel-month option[value="${state.month}"]`).textContent;[m
[32m+[m[32m            dom.totalRevenue.innerHTML = `Total Revenue s/d ${monthName} ${state.year}: Rp<span class="font-semibold text-gray-900">${formatIDRCompact(totalRevenue)}</span>`;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // --- DATA FETCHING ---[m
[32m+[m[32m        async function fetchPerformanceData() {[m
[32m+[m[32m            dom.loading.style.display = 'block';[m
[32m+[m[32m            dom.error.style.display = 'none';[m
[32m+[m[32m            dom.listContainer.innerHTML = '';[m
[32m+[m[32m            witelDataCache = [];[m
[32m+[m
[32m+[m[32m            const monthName = document.querySelector(`#witel-month option[value="${state.month}"]`).textContent;[m
[32m+[m
[32m+[m[32m            dom.title.innerHTML = `[m
[32m+[m[32m                <i class="fas fa-building" id="witel-title-icon"></i>[m
[32m+[m[32m                Witel Achievement â€“ ${state.year}[m
[32m+[m[32m            `;[m
[32m+[m
[32m+[m[32m            dom.totalRevenue.innerHTML = `Total Revenue s/d ${monthName} ${state.year}: Rp<span class="font-semibold text-gray-900">Loading...</span>`;[m
[32m+[m
[32m+[m[32m            try {[m
[32m+[m[32m                const url = `/dashboard/witel-performance-data?year=${state.year}&month=${state.month}&source=${state.source}`;[m
[32m+[m[32m                const response = await fetch(url);[m
[32m+[m[32m                if (!response.ok) throw new Error('Failed to fetch leaderboard data.');[m
[32m+[m
[32m+[m[32m                witelDataCache = await response.json(); // Store data in cache[m
[32m+[m
[32m+[m[32m                if (witelDataCache.length === 0) {[m
[32m+[m[32m                    dom.listContainer.innerHTML = '<p class="text-sm text-gray-500">No data found for these filters.</p>';[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    renderLeaderboard(); // Render the left pane[m
[32m+[m[32m                }[m
[32m+[m[32m            } catch (err) {[m
[32m+[m[32m                dom.error.textContent = `Error: ${err.message}`;[m
[32m+[m[32m                dom.error.style.display = 'block';[m
[32m+[m[32m            } finally {[m
[32m+[m[32m                dom.loading.style.display = 'none';[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        function clearDetailPane() {[m
[32m+[m[32m            state.activeWitelId = null;[m
[32m+[m[32m            dom.detailTitle.textContent = 'Customer List';[m
[32m+[m[32m            dom.detailEmpty.textContent = 'Pilih Witel dari daftar di sebelah kiri untuk melihat detail.';[m
[32m+[m[32m            dom.detailEmpty.style.display = 'block';[m
[32m+[m[32m            dom.detailContent.style.display = 'none';[m
[32m+[m
[32m+[m[32m            // Remove 'selected' from all cards[m
[32m+[m[32m            dom.listContainer.querySelectorAll('.witel-card.selected').forEach(c => c.classList.remove('selected'));[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // --- EVENT LISTENERS ---[m
[32m+[m[32m        dom.filters.forEach(input => {[m
[32m+[m[32m            input.addEventListener('change', (e) => {[m
[32m+[m[32m                state[e.target.id.replace('witel-', '')] = e.target.value;[m
[32m+[m[32m                clearDetailPane(); // Clear selection[m
[32m+[m[32m                fetchPerformanceData(); // Refetch all data[m
[32m+[m[32m            });[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        dom.listContainer.addEventListener('click', (e) => {[m
[32m+[m[32m            const card = e.target.closest('.witel-card');[m
[32m+[m[32m            if (!card) return;[m
[32m+[m
[32m+[m[32m            const witelId = card.dataset.witelId;[m
[32m+[m[32m            const witelName = card.dataset.witelName;[m
[32m+[m
[32m+[m[32m            // If already selected, do nothing[m
[32m+[m[32m            if (witelId == state.activeWitelId) return;[m
[32m+[m
[32m+[m[32m            // Remove 'selected' from old card[m
[32m+[m[32m            const oldCard = dom.listContainer.querySelector('.witel-card.selected');[m
[32m+[m[32m            oldCard?.classList.remove('selected');[m
[32m+[m
[32m+[m[32m            // Add 'selected' to new card[m
[32m+[m[32m            card.classList.add('selected');[m
[32m+[m[32m            state.activeWitelId = witelId;[m
[32m+[m
[32m+[m[32m            // Fetch new data[m
[32m+[m[32m            renderCustomerList(witelId, witelName);[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        // --- INITIAL LOAD ---[m
[32m+[m[32m        fetchPerformanceData();[m
[32m+[m[32m    });[m
[32m+[m[32m    </script>[m
[32m+[m[32m    @endpush[m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
[1mdiff --git a/resources/views/components/card-content.blade.php b/resources/views/components/card-content.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..0ff7ac6[m
[1m--- /dev/null[m
[1m+++ b/resources/views/components/card-content.blade.php[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32m@props(['class' => ''])[m
[32m+[m[32m<div {{ $attributes->merge(['class' => "p-4 $class"]) }}>[m
[32m+[m[32m  {{ $slot }}[m
[32m+[m[32m</div>[m
[1mdiff --git a/resources/views/components/card-header.blade.php b/resources/views/components/card-header.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..6032e8c[m
[1m--- /dev/null[m
[1m+++ b/resources/views/components/card-header.blade.php[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32m@props(['class' => ''])[m
[32m+[m[32m<div {{ $attributes->merge(['class' => "px-4 py-3 border-b $class"]) }}>[m
[32m+[m[32m  {{ $slot }}[m
[32m+[m[32m</div>[m
[1mdiff --git a/resources/views/components/card-title.blade.php b/resources/views/components/card-title.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..cf062d9[m
[1m--- /dev/null[m
[1m+++ b/resources/views/components/card-title.blade.php[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32m@props(['class' => ''])[m
[32m+[m[32m<h3 {{ $attributes->merge(['class' => "text-base font-semibold leading-6 $class"]) }}>[m
[32m+[m[32m  {{ $slot }}[m
[32m+[m[32m</h3>[m
[1mdiff --git a/resources/views/components/card.blade.php b/resources/views/components/card.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..6343bf9[m
[1m--- /dev/null[m
[1m+++ b/resources/views/components/card.blade.php[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32m@props(['class' => ''])[m
[32m+[m[32m<div {{ $attributes->merge(['class' => "rounded-xl border bg-white $class"]) }}>[m
[32m+[m[32m  {{ $slot }}[m
[32m+[m[32m</div>[m
[1mdiff --git a/resources/views/components/ui/card-content.blade.php b/resources/views/components/ui/card-content.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..0ff7ac6[m
[1m--- /dev/null[m
[1m+++ b/resources/views/components/ui/card-content.blade.php[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32m@props(['class' => ''])[m
[32m+[m[32m<div {{ $attributes->merge(['class' => "p-4 $class"]) }}>[m
[32m+[m[32m  {{ $slot }}[m
[32m+[m[32m</div>[m
[1mdiff --git a/resources/views/components/ui/card-header.blade.php b/resources/views/components/ui/card-header.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..6032e8c[m
[1m--- /dev/null[m
[1m+++ b/resources/views/components/ui/card-header.blade.php[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32m@props(['class' => ''])[m
[32m+[m[32m<div {{ $attributes->merge(['class' => "px-4 py-3 border-b $class"]) }}>[m
[32m+[m[32m  {{ $slot }}[m
[32m+[m[32m</div>[m
[1mdiff --git a/resources/views/components/ui/card-title.blade.php b/resources/views/components/ui/card-title.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..cf062d9[m
[1m--- /dev/null[m
[1m+++ b/resources/views/components/ui/card-title.blade.php[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32m@props(['class' => ''])[m
[32m+[m[32m<h3 {{ $attributes->merge(['class' => "text-base font-semibold leading-6 $class"]) }}>[m
[32m+[m[32m  {{ $slot }}[m
[32m+[m[32m</h3>[m
[1mdiff --git a/resources/views/components/ui/card.blade.php b/resources/views/components/ui/card.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..46287a5[m
[1m--- /dev/null[m
[1m+++ b/resources/views/components/ui/card.blade.php[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32m@props(['class' => ''])[m
[32m+[m[32m<div {{ $attributes->merge(['class' => "rounded-2xl border bg-white shadow-sm $class"]) }}>[m
[32m+[m[32m  {{ $slot }}[m
[32m+[m[32m</div>[m
[1mdiff --git a/resources/views/layouts/cc-witel-performance-layout.blade.php b/resources/views/layouts/cc-witel-performance-layout.blade.php[m
[1mnew file mode 100644[m
[1mindex 0000000..9a2dd7e[m
[1m--- /dev/null[m
[1m+++ b/resources/views/layouts/cc-witel-performance-layout.blade.php[m
[36m@@ -0,0 +1,672 @@[m
[32m+[m[32m<t!DOCTYPE html>[m
[32m+[m[32m<html lang="en">[m
[32m+[m[32m<head>[m
[32m+[m[32m    <meta charset="UTF-8">[m
[32m+[m[32m    <meta name="viewport" content="width=device-width, initial-scale=1.0">[m
[32m+[m[32m    <meta name="csrf-token" content="{{ csrf_token() }}">[m
[32m+[m[32m    <meta http-equiv="X-UA-Compatible" content="ie=edge">[m
[32m+[m[32m    <title>@yield('title', 'RLEGS Dashboard')</title>[m
[32m+[m
[32m+[m[32m    <!-- CSS Files -->[m
[32m+[m[32m    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">[m
[32m+[m[32m    <link href="https://cdn.lineicons.com/5.0/lineicons.css" rel="stylesheet">[m
[32m+[m[32m    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css">[m
[32m+[m[32m    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">[m
[32m+[m[32m    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" referrerpolicy="no-referrer">[m
[32m+[m
[32m+[m[32m    <!-- Custom CSS -->[m
[32m+[m[32m    <link rel="stylesheet" href="{{ asset('css/sidebarpage.css') }}">[m
[32m+[m[32m    <link rel="stylesheet" href="{{ asset('css/dashboard.css') }}">[m
[32m+[m[32m    <link rel="stylesheet" href="{{ asset('css/inertia.css') }}">[m
[32m+[m
[32m+[m[32m    @yield('styles')[m
[32m+[m[32m    <style>[x-cloak]{display:none !important}</style>[m
[32m+[m
[32m+[m[32m    <!-- Core JavaScript -->[m
[32m+[m[32m    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>[m
[32m+[m[32m    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>[m
[32m+[m
[32m+[m[32m    <script defer src="https://unpkg.com/alpinejs@3.13.10/dist/cdn.min.js"></script>[m
[32m+[m[32m</head>[m
[32m+[m[32m<body>[m
[32m+[m[32m    <div class="wrapper">[m
[32m+[m[32m        <!-- Sidebar -->[m
[32m+[m[32m        <aside id="sidebar">[m
[32m+[m[32m            <div class="d-flex">[m
[32m+[m[32m                <button id="toggle-btn" type="button">[m
[32m+[m[32m                    <img src="{{ asset('img/twiyh.png') }}" class="avatar rounded-circle" alt="Logo" width="35" height="35" style="margin-left: 1px">[m
[32m+[m[32m                </button>[m
[32m+[m[32m                <div class="sidebar-logo">[m
[32m+[m[32m                    <a href="#">RLEGS</a>[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <ul class="sidebar-nav">[m
[32m+[m[32m                <li class="sidebar-item">[m
[32m+[m[32m                    <a href="{{ route('dashboard') }}" class="sidebar-link">[m
[32m+[m[32m                        <i class="lni lni-dashboard-square-1"></i><span>Overview Data</span>[m
[32m+[m[32m                    </a>[m
[32m+[m[32m                </li>[m
[32m+[m[32m                <li class="sidebar-item">[m
[32m+[m[32m                    <a href="{{ route('revenue.index') }}" class="sidebar-link">[m
[32m+[m[32m                        <i class="lni lni-file-pencil"></i><span>Data Revenue</span>[m
[32m+[m[32m                    </a>[m
[32m+[m[32m                </li>[m
[32m+[m[32m                <li class="sidebar-item">[m
[32m+[m[32m                    <a href="{{ route('witel.perform') }}" class="sidebar-link">[m
[32m+[m[32m                        <i class="lni lni-buildings-1"></i><span>CC & Witel</span>[m
[32m+[m[32m                    </a>[m
[32m+[m[32m                </li>[m
[32m+[m[32m                <li class="sidebar-item">[m
[32m+[m[32m                    <a href="{{ route('treg3.index') }}" class="sidebar-link">[m
[32m+[m[32m                        <i class="lni lni-buildings-1"></i><span>[NEW] CC & Witel</span>[m
[32m+[m[32m                    </a>[m
[32m+[m[32m                </li>[m
[32m+[m[32m                <li class="sidebar-item">[m
[32m+[m[32m                    <a href="{{ route('leaderboard') }}" class="sidebar-link">[m
[32m+[m[32m                        <i class="lni lni-hierarchy-1"></i><span>Leaderboard AM</span>[m
[32m+[m[32m                    </a>[m
[32m+[m[32m                </li>[m
[32m+[m[32m                <li class="sidebar-item">[m
[32m+[m[32m                    <a href="" class="sidebar-link">[m
[32m+[m[32m                        <i class="lni lni-cloud-upload"></i><span>File Management</span>[m
[32m+[m[32m                    </a>[m
[32m+[m[32m                </li>[m
[32m+[m[32m            </ul>[m
[32m+[m[32m            <div class="sidebar-footer">[m
[32m+[m[32m                <a href="{{ route('profile.edit') }}" class="sidebar-link">[m
[32m+[m[32m                    <i class="lni lni-gear-1"></i><span>Settings</span>[m
[32m+[m[32m                </a>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div class="sidebar-footer">[m
[32m+[m[32m                <a href="{{ route('logout') }}" class="sidebar-link">[m
[32m+[m[32m                    <i class="lni lni-exit"></i><span>Logout</span>[m
[32m+[m[32m                </a>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </aside>[m
[32m+[m
[32m+[m[32m        <!-- Main Content -->[m
[32m+[m[32m        <div class="main p-0">[m
[32m+[m[32m            <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">[m
[32m+[m[32m                <div class="container-fluid">[m
[32m+[m[32m                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">[m
[32m+[m[32m                        <span class="navbar-toggler-icon"></span>[m
[32m+[m[32m                    </button>[m
[32m+[m
[32m+[m[32m                    <!-- Center: quick links with consistent spacing -->[m
[32m+[m[32m                    <nav class="flex-fill">[m
[32m+[m[32m                      <ul class="navbar-nav flex-row gap-3 mb-0 d-none d-md-flex">[m
[32m+[m[32m                        <li class="nav-item">[m
[32m+[m[32m                          <a href="#trend-revenue" class="nav-link d-flex align-items-center px-3 py-2">[m
[32m+[m[32m                            <i class="lni lni-bar-chart-4 me-2"></i><span>Trend Revenue</span>[m
[32m+[m[32m                          </a>[m
[32m+[m[32m                        </li>[m
[32m+[m[32m                        <li class="nav-item">[m
[32m+[m[32m                          <a href="#revenue-performance" class="nav-link d-flex align-items-center px-3 py-2">[m
[32m+[m[32m                            <i class="lni lni-dollar-circle me-2"></i><span>Revenue Performance</span>[m
[32m+[m[32m                          </a>[m
[32m+[m[32m                        </li>[m
[32m+[m[32m                        <li class="nav-item">[m
[32m+[m[32m                          <a href="#witel-performance" class="nav-link d-flex align-items-center px-3 py-2">[m
[32m+[m[32m                            <i class="lni lni-buildings-1 me-2"></i><span>Witel Performance</span>[m
[32m+[m[32m                          </a>[m
[32m+[m[32m                        </li>[m
[32m+[m[32m                        <li class="nav-item">[m
[32m+[m[32m                          <a href="#top-customers" class="nav-link d-flex align-items-center px-3 py-2">[m
[32m+[m[32m                            <i class="lni lni-trophy-1 me-2"></i><span>Top Customers</span>[m
[32m+[m[32m                          </a>[m
[32m+[m[32m                        </li>[m
[32m+[m[32m                        <li class="nav-item">[m
[32m+[m[32m                          <a href="#division-overview" class="nav-link d-flex align-items-center px-3 py-2">[m
[32m+[m[32m                            <i class="lni lni-pie-chart-2 me-2"></i><span>Division Overview</span>[m
[32m+[m[32m                          </a>[m
[32m+[m[32m                        </li>[m
[32m+[m[32m                        <li class="nav-item">[m
[32m+[m[32m                          <a href="#cc-performance" class="nav-link d-flex align-items-center px-3 py-2">[m
[32m+[m[32m                            <i class="lni lni-search-2 me-2"></i><span>CC Performance</span>[m
[32m+[m[32m                          </a>[m
[32m+[m[32m                        </li>[m
[32m+[m[32m                      </ul>[m
[32m+[m[32m                    </nav>[m
[32m+[m
[32m+[m[32m                    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">[m
[32m+[m[32m                        <ul class="navbar-nav align-items-center">[m
[32m+[m[32m                            <li class="nav-item dropdown ms-1">[m
[32m+[m[32m                                <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">[m
[32m+[m[32m                                    <div class="avatar-container me-2">[m
[32m+[m[32m                                        <!-- FIX: check auth before this? cause using `user()?` is maybe not be the best practice? idk -->[m
[32m+[m[32m                                        @if(Auth::user()->profile_image)[m
[32m+[m[32m                                            <img src="{{ asset('storage/' . Auth::user()->profile_image) }}" alt="{{ Auth::user()->name }}">[m
[32m+[m[32m                                        @else[m
[32m+[m[32m                                            <img src="{{ asset('img/profile.png') }}" alt="Default Profile">[m
[32m+[m[32m                                        @endif[m
[32m+[m[32m                                    </div>[m
[32m+[m[32m                                    <span>{{ Auth::user()->name }}</span>[m
[32m+[m[32m                                </a>[m
[32m+[m[32m                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">[m
[32m+[m[32m                                    <li>[m
[32m+[m[32m                                        <a class="dropdown-item" href="{{ route('profile.edit') }}">[m
[32m+[m[32m                                            {{ __('Settings') }}[m
[32m+[m[32m                                        </a>[m
[32m+[m[32m                                    </li>[m
[32m+[m[32m                                    <li><hr class="dropdown-divider"></li>[m
[32m+[m[32m                                    <li>[m
[32m+[m[32m                                        <form method="POST" action="{{ route('logout') }}" class="m-0">[m
[32m+[m[32m                                            @csrf[m
[32m+[m[32m                                            <button type="submit" class="dropdown-item text-danger">[m
[32m+[m[32m                                                {{ __('Log Out') }}[m
[32m+[m[32m                                            </button>[m
[32m+[m[32m                                        </form>[m
[32m+[m[32m                                    </li>[m
[32m+[m[32m                                </ul>[m
[32m+[m[32m                            </li>[m
[32m+[m[32m                        </ul>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </nav>[m
[32m+[m[32m            @yield('content')[m
[32m+[m[32m        </div>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <!-- JavaScript -->[m
[32m+[m[32m    <script src="{{ asset('sidebar/script.js') }}"></script>[m
[32m+[m[32m    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>[m
[32m+[m
[32m+[m[32m    <!-- Mobile Responsive JavaScript -->[m
[32m+[m[32m    <script>[m
[32m+[m[32m        // Mobile responsive enhancements[m
[32m+[m[32m        document.addEventListener('DOMContentLoaded', function() {[m
[32m+[m[32m            // Create mobile navbar structure[m
[32m+[m[32m            createMobileNavbar();[m
[32m+[m
[32m+[m[32m            // Initialize sidebar dropdowns[m
[32m+[m[32m            initializeSidebarDropdowns();[m
[32m+[m
[32m+[m[32m            // Handle screen orientation changes[m
[32m+[m[32m            window.addEventListener('orientationchange', function() {[m
[32m+[m[32m                setTimeout(function() {[m
[32m+[m[32m                    window.dispatchEvent(new Event('resize'));[m
[32m+[m[32m                }, 100);[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            // Prevent horizontal scroll on mobile[m
[32m+[m[32m            function preventHorizontalScroll() {[m
[32m+[m[32m                if (window.innerWidth <= 768) {[m
[32m+[m[32m                    document.body.style.overflowX = 'hidden';[m
[32m+[m[32m                    const wrapper = document.querySelector('.wrapper');[m
[32m+[m[32m                    if (wrapper) {[m
[32m+[m[32m                        wrapper.style.overflowX = 'hidden';[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            // Mobile touch improvements[m
[32m+[m[32m            if ('ontouchstart' in window) {[m
[32m+[m[32m                document.body.classList.add('touch-device');[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            // Run on load and resize[m
[32m+[m[32m            preventHorizontalScroll();[m
[32m+[m[32m            window.addEventListener('resize', function() {[m
[32m+[m[32m                preventHorizontalScroll();[m
[32m+[m[32m                if (window.innerWidth > 768) {[m
[32m+[m[32m                    hideMobileElements();[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    createMobileNavbar();[m
[32m+[m[32m                    initializeSidebarDropdowns();[m
[32m+[m[32m                }[m
[32m+[m[32m            });[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        // Initialize sidebar dropdowns functionality[m
[32m+[m[32m        function initializeSidebarDropdowns() {[m
[32m+[m[32m            const dropdownLinks = document.querySelectorAll('#sidebar .sidebar-link.has-dropdown');[m
[32m+[m
[32m+[m[32m            dropdownLinks.forEach(function(link) {[m
[32m+[m[32m                // Remove existing event listeners to avoid duplicates[m
[32m+[m[32m                link.removeEventListener('click', handleDropdownClick);[m
[32m+[m
[32m+[m[32m                // Add new event listener[m
[32m+[m[32m                link.addEventListener('click', handleDropdownClick);[m
[32m+[m[32m            });[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Handle dropdown click[m
[32m+[m[32m        function handleDropdownClick(e) {[m
[32m+[m[32m            e.preventDefault();[m
[32m+[m
[32m+[m[32m            const link = e.currentTarget;[m
[32m+[m[32m            const targetId = link.getAttribute('data-bs-target');[m
[32m+[m[32m            const target = document.querySelector(targetId);[m
[32m+[m
[32m+[m[32m            if (target) {[m
[32m+[m[32m                const isExpanded = link.getAttribute('aria-expanded') === 'true';[m
[32m+[m
[32m+[m[32m                // Close all other dropdowns in sidebar[m
[32m+[m[32m                const allDropdowns = document.querySelectorAll('#sidebar .sidebar-dropdown');[m
[32m+[m[32m                const allDropdownLinks = document.querySelectorAll('#sidebar .sidebar-link.has-dropdown');[m
[32m+[m
[32m+[m[32m                allDropdowns.forEach(function(dropdown) {[m
[32m+[m[32m                    if (dropdown !== target) {[m
[32m+[m[32m                        dropdown.classList.remove('show');[m
[32m+[m[32m                        dropdown.style.display = 'none';[m
[32m+[m[32m                    }[m
[32m+[m[32m                });[m
[32m+[m
[32m+[m[32m                allDropdownLinks.forEach(function(dropdownLink) {[m
[32m+[m[32m                    if (dropdownLink !== link) {[m
[32m+[m[32m                        dropdownLink.setAttribute('aria-expanded', 'false');[m
[32m+[m[32m                        dropdownLink.classList.add('collapsed');[m
[32m+[m[32m                    }[m
[32m+[m[32m                });[m
[32m+[m
[32m+[m[32m                // Toggle current dropdown[m
[32m+[m[32m                if (isExpanded) {[m
[32m+[m[32m                    // Close[m
[32m+[m[32m                    target.classList.remove('show');[m
[32m+[m[32m                    target.style.display = 'none';[m
[32m+[m[32m                    link.setAttribute('aria-expanded', 'false');[m
[32m+[m[32m                    link.classList.add('collapsed');[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    // Open[m
[32m+[m[32m                    target.classList.add('show');[m
[32m+[m[32m                    target.style.display = 'block';[m
[32m+[m[32m                    link.setAttribute('aria-expanded', 'true');[m
[32m+[m[32m                    link.classList.remove('collapsed');[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Create mobile navbar structure[m
[32m+[m[32m        function createMobileNavbar() {[m
[32m+[m[32m            if (window.innerWidth <= 768) {[m
[32m+[m[32m                let navbar = document.querySelector('.navbar');[m
[32m+[m
[32m+[m[32m                if (!navbar) {[m
[32m+[m[32m                    navbar = document.createElement('nav');[m
[32m+[m[32m                    navbar.className = 'navbar navbar-expand-lg navbar-light bg-white';[m
[32m+[m[32m                    document.body.insertBefore(navbar, document.body.firstChild);[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                const containerFluid = navbar.querySelector('.container-fluid') || document.createElement('div');[m
[32m+[m[32m                containerFluid.className = 'container-fluid';[m
[32m+[m
[32m+[m[32m                if (!navbar.contains(containerFluid)) {[m
[32m+[m[32m                    navbar.appendChild(containerFluid);[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                // Clear existing content[m
[32m+[m[32m                containerFluid.innerHTML = '';[m
[32m+[m
[32m+[m[32m                // Create left side (hamburger + brand)[m
[32m+[m[32m                const navbarLeft = document.createElement('div');[m
[32m+[m[32m                navbarLeft.className = 'navbar-left';[m
[32m+[m
[32m+[m[32m                // Hamburger button[m
[32m+[m[32m                const hamburgerBtn = document.createElement('button');[m
[32m+[m[32m                hamburgerBtn.className = 'mobile-menu-btn';[m
[32m+[m[32m                hamburgerBtn.innerHTML = '<i class="fas fa-bars"></i>';[m
[32m+[m[32m                hamburgerBtn.onclick = toggleSidebar;[m
[32m+[m
[32m+[m[32m                // Brand[m
[32m+[m[32m                const brand = document.createElement('a');[m
[32m+[m[32m                brand.className = 'navbar-brand';[m
[32m+[m[32m                brand.href = '#';[m
[32m+[m[32m                brand.textContent = 'RLEGS Dashboard';[m
[32m+[m
[32m+[m[32m                navbarLeft.appendChild(hamburgerBtn);[m
[32m+[m[32m                navbarLeft.appendChild(brand);[m
[32m+[m
[32m+[m[32m                // Create right side (profile)[m
[32m+[m[32m                const navbarRight = document.createElement('div');[m
[32m+[m[32m                navbarRight.className = 'navbar-right';[m
[32m+[m
[32m+[m[32m                // Profile dropdown[m
[32m+[m[32m                const profileDropdown = document.createElement('div');[m
[32m+[m[32m                profileDropdown.className = 'nav-item dropdown';[m
[32m+[m[32m                profileDropdown.innerHTML = `[m
[32m+[m[32m                    <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">[m
[32m+[m[32m                        <div class="avatar-container">[m
[32m+[m[32m                            <img src="{{ asset('img/profile.png') }}" alt="Profile">[m
[32m+[m[32m                        </div>[m
[32m+[m[32m                        <span>{{ Auth::user()->name ?? 'Admin' }}</span>[m
[32m+[m[32m                    </a>[m
[32m+[m[32m                    <ul class="dropdown-menu" aria-labelledby="profileDropdown">[m
[32m+[m[32m                        <li><a class="dropdown-item" href="{{ route('profile.edit') }}"><i class="fas fa-cog me-2"></i>Settings</a></li>[m
[32m+[m[32m                        <li><hr class="dropdown-divider"></li>[m
[32m+[m[32m                        <li><a class="dropdown-item" href="{{ route('logout') }}"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>[m
[32m+[m[32m                    </ul>[m
[32m+[m[32m                `;[m
[32m+[m
[32m+[m[32m                navbarRight.appendChild(profileDropdown);[m
[32m+[m
[32m+[m[32m                // Append to container[m
[32m+[m[32m                containerFluid.appendChild(navbarLeft);[m
[32m+[m[32m                containerFluid.appendChild(navbarRight);[m
[32m+[m
[32m+[m[32m                // Create overlay for sidebar[m
[32m+[m[32m                createSidebarOverlay();[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Create sidebar overlay[m
[32m+[m[32m        function createSidebarOverlay() {[m
[32m+[m[32m            let overlay = document.querySelector('.sidebar-overlay');[m
[32m+[m[32m            if (!overlay) {[m
[32m+[m[32m                overlay = document.createElement('div');[m
[32m+[m[32m                overlay.className = 'sidebar-overlay';[m
[32m+[m[32m                overlay.onclick = closeSidebar;[m
[32m+[m[32m                document.body.appendChild(overlay);[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Toggle sidebar function[m
[32m+[m[32m        function toggleSidebar() {[m
[32m+[m[32m            const sidebar = document.querySelector('#sidebar');[m
[32m+[m[32m            const overlay = document.querySelector('.sidebar-overlay');[m
[32m+[m
[32m+[m[32m            if (sidebar && overlay) {[m
[32m+[m[32m                const isOpen = sidebar.classList.contains('show');[m
[32m+[m
[32m+[m[32m                if (isOpen) {[m
[32m+[m[32m                    closeSidebar();[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    openSidebar();[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Open sidebar[m
[32m+[m[32m        function openSidebar() {[m
[32m+[m[32m            const sidebar = document.querySelector('#sidebar');[m
[32m+[m[32m            const overlay = document.querySelector('.sidebar-overlay');[m
[32m+[m
[32m+[m[32m            if (sidebar && overlay) {[m
[32m+[m[32m                sidebar.classList.add('show');[m
[32m+[m[32m                overlay.classList.add('show');[m
[32m+[m[32m                document.body.style.overflow = 'hidden';[m
[32m+[m
[32m+[m[32m                // Re-initialize dropdown functionality when sidebar opens[m
[32m+[m[32m                initializeSidebarDropdowns();[m
[32m+[m
[32m+[m[32m                // Add click handlers to sidebar links for mobile[m
[32m+[m[32m                const sidebarLinks = sidebar.querySelectorAll('.sidebar-link:not(.has-dropdown)');[m
[32m+[m[32m                sidebarLinks.forEach(link => {[m
[32m+[m[32m                    link.addEventListener('click', function() {[m
[32m+[m[32m                        if (window.innerWidth <= 768) {[m
[32m+[m[32m                            setTimeout(() => {[m
[32m+[m[32m                                closeSidebar();[m
[32m+[m[32m                            }, 200);[m
[32m+[m[32m                        }[m
[32m+[m[32m                    });[m
[32m+[m[32m                });[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Close sidebar[m
[32m+[m[32m        function closeSidebar() {[m
[32m+[m[32m            const sidebar = document.querySelector('#sidebar');[m
[32m+[m[32m            const overlay = document.querySelector('.sidebar-overlay');[m
[32m+[m
[32m+[m[32m            if (sidebar && overlay) {[m
[32m+[m[32m                sidebar.classList.remove('show');[m
[32m+[m[32m                overlay.classList.remove('show');[m
[32m+[m[32m                document.body.style.overflow = '';[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Hide mobile elements on desktop[m
[32m+[m[32m        function hideMobileElements() {[m
[32m+[m[32m            const overlay = document.querySelector('.sidebar-overlay');[m
[32m+[m[32m            if (overlay) {[m
[32m+[m[32m                overlay.remove();[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            const sidebar = document.querySelector('#sidebar');[m
[32m+[m[32m            if (sidebar) {[m
[32m+[m[32m                sidebar.classList.remove('show');[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            document.body.style.overflow = '';[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Handle clicks outside sidebar to close it[m
[32m+[m[32m        document.addEventListener('click', function(event) {[m
[32m+[m[32m            if (window.innerWidth <= 768) {[m
[32m+[m[32m                const sidebar = document.querySelector('#sidebar');[m
[32m+[m[32m                const hamburger = document.querySelector('.mobile-menu-btn');[m
[32m+[m
[32m+[m[32m                if (sidebar && sidebar.classList.contains('show')) {[m
[32m+[m[32m                    if (!sidebar.contains(event.target) && hamburger && !hamburger.contains(event.target)) {[m
[32m+[m[32m                        closeSidebar();[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        // Handle swipe gestures for mobile[m
[32m+[m[32m        let touchStartX = 0;[m
[32m+[m[32m        let touchEndX = 0;[m
[32m+[m
[32m+[m[32m        document.addEventListener('touchstart', function(event) {[m
[32m+[m[32m            touchStartX = event.changedTouches[0].screenX;[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        document.addEventListener('touchend', function(event) {[m
[32m+[m[32m            touchEndX = event.changedTouches[0].screenX;[m
[32m+[m[32m            handleSwipe();[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        function handleSwipe() {[m
[32m+[m[32m            if (window.innerWidth <= 768) {[m
[32m+[m[32m                const swipeDistance = touchEndX - touchStartX;[m
[32m+[m[32m                const sidebar = document.querySelector('#sidebar');[m
[32m+[m
[32m+[m[32m                // Swipe right to open sidebar[m
[32m+[m[32m                if (swipeDistance > 50 && touchStartX < 50) {[m
[32m+[m[32m                    openSidebar();[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                // Swipe left to close sidebar[m
[32m+[m[32m                if (swipeDistance < -50 && sidebar && sidebar.classList.contains('show')) {[m
[32m+[m[32m                    closeSidebar();[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Adjust viewport for better mobile rendering[m
[32m+[m[32m        function adjustViewportForMobile() {[m
[32m+[m[32m            const viewport = document.querySelector('meta[name=viewport]');[m
[32m+[m[32m            if (viewport && window.innerWidth <= 768) {[m
[32m+[m[32m                viewport.setAttribute('content',[m
[32m+[m[32m                    'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'[m
[32m+[m[32m                );[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Run viewport adjustment[m
[32m+[m[32m        adjustViewportForMobile();[m
[32m+[m[32m        window.addEventListener('resize', adjustViewportForMobile);[m
[32m+[m
[32m+[m[32m        // Accessibility improvements[m
[32m+[m[32m        document.addEventListener('keydown', function(e) {[m
[32m+[m[32m            // Close sidebar with Escape key[m
[32m+[m[32m            if (e.key === 'Escape') {[m
[32m+[m[32m                const sidebar = document.querySelector('#sidebar');[m
[32m+[m[32m                if (sidebar && sidebar.classList.contains('show')) {[m
[32m+[m[32m                    closeSidebar();[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            // Handle Enter/Space for dropdown links[m
[32m+[m[32m            if (e.key === 'Enter' || e.key === ' ') {[m
[32m+[m[32m                const target = e.target;[m
[32m+[m[32m                if (target.classList.contains('has-dropdown')) {[m
[32m+[m[32m                    e.preventDefault();[m
[32m+[m[32m                    handleDropdownClick(e);[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        // Enhanced Bootstrap dropdown initialization for mobile[m
[32m+[m[32m        document.addEventListener('DOMContentLoaded', function() {[m
[32m+[m[32m            // Initialize Bootstrap dropdowns[m
[32m+[m[32m            var dropdownElementList = [].slice.call(document.querySelectorAll('[data-bs-toggle="dropdown"]'));[m
[32m+[m[32m            var dropdownList = dropdownElementList.map(function (dropdownToggleEl) {[m
[32m+[m[32m                return new bootstrap.Dropdown(dropdownToggleEl);[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            // Fix for mobile dropdown menu positioning[m
[32m+[m[32m            document.addEventListener('show.bs.dropdown', function (e) {[m
[32m+[m[32m                const dropdown = e.target.closest('.dropdown');[m
[32m+[m[32m                if (dropdown && window.innerWidth <= 768) {[m
[32m+[m[32m                    setTimeout(function() {[m
[32m+[m[32m                        const menu = dropdown.querySelector('.dropdown-menu');[m
[32m+[m[32m                        if (menu) {[m
[32m+[m[32m                            const rect = dropdown.getBoundingClientRect();[m
[32m+[m[32m                            const viewportWidth = window.innerWidth;[m
[32m+[m
[32m+[m[32m                            if (rect.right + menu.offsetWidth > viewportWidth) {[m
[32m+[m[32m                                menu.classList.add('dropdown-menu-end');[m
[32m+[m[32m                            }[m
[32m+[m[32m                        }[m
[32m+[m[32m                    }, 10);[m
[32m+[m[32m                }[m
[32m+[m[32m            });[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        // Performance optimization for mobile[m
[32m+[m[32m        let resizeTimeout;[m
[32m+[m[32m        window.addEventListener('resize', function() {[m
[32m+[m[32m            clearTimeout(resizeTimeout);[m
[32m+[m[32m            resizeTimeout = setTimeout(function() {[m
[32m+[m[32m                // Recalculate layout after resize[m
[32m+[m[32m                if (window.innerWidth <= 768) {[m
[32m+[m[32m                    createMobileNavbar();[m
[32m+[m[32m                    initializeSidebarDropdowns();[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    hideMobileElements();[m
[32m+[m[32m                }[m
[32m+[m[32m            }, 150);[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        // Focus management for sidebar[m
[32m+[m[32m        function manageFocus() {[m
[32m+[m[32m            const sidebar = document.querySelector('#sidebar');[m
[32m+[m[32m            if (!sidebar) return;[m
[32m+[m
[32m+[m[32m            const firstFocusableElement = sidebar.querySelector('a, button');[m
[32m+[m[32m            const lastFocusableElement = sidebar.querySelector('.sidebar-footer .sidebar-link:last-child');[m
[32m+[m
[32m+[m[32m            if (sidebar.classList.contains('show')) {[m
[32m+[m[32m                if (firstFocusableElement) {[m
[32m+[m[32m                    firstFocusableElement.focus();[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                // Trap focus within sidebar[m
[32m+[m[32m                sidebar.addEventListener('keydown', function(e) {[m
[32m+[m[32m                    if (e.key === 'Tab') {[m
[32m+[m[32m                        if (e.shiftKey) {[m
[32m+[m[32m                            if (document.activeElement === firstFocusableElement) {[m
[32m+[m[32m                                if (lastFocusableElement) {[m
[32m+[m[32m                                    lastFocusableElement.focus();[m
[32m+[m[32m                                    e.preventDefault();[m
[32m+[m[32m                                }[m
[32m+[m[32m                            }[m
[32m+[m[32m                        } else {[m
[32m+[m[32m                            if (document.activeElement === lastFocusableElement) {[m
[32m+[m[32m                                if (firstFocusableElement) {[m
[32m+[m[32m                                    firstFocusableElement.focus();[m
[32m+[m[32m                                    e.preventDefault();[m
[32m+[m[32m                                }[m
[32m+[m[32m                            }[m
[32m+[m[32m                        }[m
[32m+[m[32m                    }[m
[32m+[m[32m                });[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Smooth animations for sidebar transitions[m
[32m+[m[32m        function addSmoothTransitions() {[m
[32m+[m[32m            const sidebar = document.querySelector('#sidebar');[m
[32m+[m[32m            if (sidebar && window.innerWidth <= 768) {[m
[32m+[m[32m                sidebar.style.transition = 'left 0.3s cubic-bezier(0.4, 0, 0.2, 1)';[m
[32m+[m
[32m+[m[32m                // Add bounce effect when opening[m
[32m+[m[32m                sidebar.addEventListener('transitionend', function() {[m
[32m+[m[32m                    if (sidebar.classList.contains('show')) {[m
[32m+[m[32m                        sidebar.style.transform = 'translateX(2px)';[m
[32m+[m[32m                        setTimeout(() => {[m
[32m+[m[32m                            sidebar.style.transform = 'translateX(0)';[m
[32m+[m[32m                        }, 100);[m
[32m+[m[32m                    }[m
[32m+[m[32m                });[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Initialize smooth transitions[m
[32m+[m[32m        addSmoothTransitions();[m
[32m+[m
[32m+[m[32m        // Optimize for mobile performance[m
[32m+[m[32m        function optimizeForMobile() {[m
[32m+[m[32m            if (window.innerWidth <= 768) {[m
[32m+[m[32m                // Reduce animation complexity on mobile[m
[32m+[m[32m                document.body.classList.add('mobile-optimized');[m
[32m+[m
[32m+[m[32m                // Disable hover effects on touch devices[m
[32m+[m[32m                if ('ontouchstart' in window) {[m
[32m+[m[32m                    document.body.classList.add('touch-device');[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                // Optimize scrolling[m
[32m+[m[32m                document.body.style.webkitOverflowScrolling = 'touch';[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        optimizeForMobile();[m
[32m+[m
[32m+[m[32m        // Initialize everything when DOM is ready[m
[32m+[m[32m        if (document.readyState === 'loading') {[m
[32m+[m[32m            document.addEventListener('DOMContentLoaded', function() {[m
[32m+[m[32m                initializeSidebarDropdowns();[m
[32m+[m[32m                createMobileNavbar();[m
[32m+[m[32m                addSmoothTransitions();[m
[32m+[m[32m                manageFocus();[m
[32m+[m[32m            });[m
[32m+[m[32m        } else {[m
[32m+[m[32m            initializeSidebarDropdowns();[m
[32m+[m[32m            createMobileNavbar();[m
[32m+[m[32m            addSmoothTransitions();[m
[32m+[m[32m            manageFocus();[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Debug function for mobile testing[m
[32m+[m[32m        function debugMobile() {[m
[32m+[m[32m            console.log('Screen width:', window.innerWidth);[m
[32m+[m[32m            console.log('Sidebar visible:', document.querySelector('#sidebar')?.classList.contains('show'));[m
[32m+[m[32m            console.log('Mobile navbar created:', !!document.querySelector('.mobile-menu-btn'));[m
[32m+[m[32m            console.log('Dropdowns initialized:', document.querySelectorAll('#sidebar .sidebar-link.has-dropdown').length);[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Expose debug function globally for testing[m
[32m+[m[32m        window.debugMobile = debugMobile;[m
[32m+[m
[32m+[m[32m        // Clean up function[m
[32m+[m[32m        function cleanup() {[m
[32m+[m[32m            // Remove event listeners when not needed[m
[32m+[m[32m            window.removeEventListener('resize', preventHorizontalScroll);[m
[32m+[m[32m            document.removeEventListener('touchstart', function() {});[m
[32m+[m[32m            document.removeEventListener('touchend', function() {});[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        // Service worker registration for offline functionality (optional)[m
[32m+[m[32m        if ('serviceWorker' in navigator && window.innerWidth <= 768) {[m
[32m+[m[32m            navigator.serviceWorker.register('/sw.js').catch(function(error) {[m
[32m+[m[32m                console.log('ServiceWorker registration failed:', error);[m
[32m+[m[32m            });[m
[32m+[m[32m        }[m
[32m+[m[32m    </script>[m
[32m+[m
[32m+[m[32m    @yield('scripts')[m
[32m+[m[32m    @stack('scripts')[m
[32m+[m[32m</body>[m
[32m+[m[32m</html>[m
[1mdiff --git a/resources/views/layouts/main.blade.php b/resources/views/layouts/main.blade.php[m
[1mindex ea8ca01..017db5b 100644[m
[1m--- a/resources/views/layouts/main.blade.php[m
[1m+++ b/resources/views/layouts/main.blade.php[m
[36m@@ -17,6 +17,7 @@[m
     <!-- Custom CSS -->[m
     <link rel="stylesheet" href="{{ asset('css/sidebarpage.css') }}">[m
     <link rel="stylesheet" href="{{ asset('css/dashboard.css') }}">[m
[32m+[m[32m    <link rel="stylesheet" href="{{ asset('css/inertia.css') }}">[m
 [m
     @yield('styles')[m
 [m
[36m@@ -52,6 +53,11 @@[m
                         <i class="lni lni-buildings-1"></i><span>CC & Witel</span>[m
                     </a>[m
                 </li>[m
[32m+[m[32m                <li class="sidebar-item">[m
[32m+[m[32m                    <a href="{{ route('treg3.index') }}" class="sidebar-link">[m
[32m+[m[32m                        <i class="lni lni-buildings-1"></i><span>[NEW] CC & Witel</span>[m
[32m+[m[32m                    </a>[m
[32m+[m[32m                </li>[m
                 <li class="sidebar-item">[m
                     <a href="{{ route('leaderboard') }}" class="sidebar-link">[m
                         <i class="lni lni-hierarchy-1"></i><span>Leaderboard AM</span>[m
